import{a as B,b as fe,d as Y}from"./chunk-DA6QTKRM.js";import{a as U}from"./chunk-LEFVD3YU.js";import{a as P}from"./chunk-4W66WWZS.js";import"./chunk-L6LCCD2S.js";import"./chunk-AHVS5ZUQ.js";import{a as R}from"./chunk-MMDEVXPQ.js";import"./chunk-DQPZBSHI.js";import"./chunk-XLNWZJIM.js";import"./chunk-6H3Y45OD.js";import"./chunk-KALOGAGR.js";import"./chunk-Z3AVDJYR.js";import"./chunk-DYCW5JBN.js";import"./chunk-U65S63W6.js";import{B as ue}from"./chunk-AHWM6USP.js";import"./chunk-DFIMOBBJ.js";import"./chunk-RD5QD7MH.js";import"./chunk-6IJDRLPZ.js";import{d as K}from"./chunk-ESXBSF3B.js";import"./chunk-FYP53U2P.js";import"./chunk-Z4OLA6VU.js";import"./chunk-5O3SURTC.js";import{v as pe,w as ce,x as ge}from"./chunk-NMBDO6HS.js";import"./chunk-55MCSU6E.js";import"./chunk-OPNT5XFL.js";import{a as _e}from"./chunk-FQEN5BEF.js";import{a as de}from"./chunk-CE23KTLV.js";import{d as v}from"./chunk-ZL32ASCM.js";import"./chunk-3TUBCZ6Z.js";import"./chunk-5RWJB7PM.js";import{$ as le,ba as ne,ca as se}from"./chunk-UOK5DCVS.js";import{b as C}from"./chunk-O4AMPUEN.js";import{q as G}from"./chunk-AACZ2HW4.js";import"./chunk-M2U4YLEL.js";import"./chunk-ZBGU2467.js";import"./chunk-DD3BDKUM.js";import{bc as ie}from"./chunk-TYUTKD3A.js";import"./chunk-ENPA2E7U.js";import"./chunk-WOHVJ5VI.js";import{a as H}from"./chunk-HXEPH4TB.js";import{a as Ie}from"./chunk-F7IOPQEO.js";import"./chunk-QBSBGD35.js";import"./chunk-GFKCYZVW.js";import"./chunk-CHLBHCPL.js";import"./chunk-NC7RXVWZ.js";import"./chunk-DM24NLHH.js";import"./chunk-PTVNLPKV.js";import"./chunk-JFKXAMRK.js";import{f as me}from"./chunk-V2SICOMY.js";import"./chunk-Z6Y7MSRE.js";import{c as o}from"./chunk-FVQK2MNN.js";import"./chunk-5Z5B37ND.js";import{Oc as ae,zc as D}from"./chunk-QWQGBYOY.js";import"./chunk-BUAMOL6H.js";import{H as S,u as q}from"./chunk-PLHFXPVU.js";import{G as te,f as re,o as oe,pa as J}from"./chunk-5BQQ5BTM.js";import{N as Q,w as W}from"./chunk-4IQZG47E.js";import"./chunk-AJ3QZWYK.js";import"./chunk-4USCG7JU.js";import"./chunk-4LMFCZAJ.js";import"./chunk-GBWBODBO.js";import{H as X,ca as F}from"./chunk-X62Q7VCJ.js";import"./chunk-X7RY3AWM.js";import{a as O}from"./chunk-WQYVBC56.js";import"./chunk-MX777P4Z.js";import"./chunk-GW6IXZ75.js";import"./chunk-LSOIOGAP.js";import"./chunk-54ZU3WOZ.js";import"./chunk-E4IUBLG2.js";import"./chunk-7PMBWAQJ.js";import"./chunk-Z37CYTXG.js";import"./chunk-W3TSI3ZZ.js";import"./chunk-JSF2EI74.js";import"./chunk-56JXL4SQ.js";import"./chunk-METSMHFB.js";import{f as w,m as l,o as n}from"./chunk-CS4SUKWE.js";l();n();var x=w(O()),Ae=w(Ie());J();Q();l();n();var ee=w(O());Q();var We=({isLoading:r,onDone:a})=>ee.default.createElement(de.FooterActions,{placeholder:!0},ee.default.createElement(F,{onClick:a,category:F.CATEGORY.fill,type:F.TYPE.primary,size:F.SIZE.lg,block:!0,disabled:r},W("wallet_manage_btn_edit_done"))),Ne=We;l();n();var t=w(O()),ye=w(ie()),V=w(X());ae();l();n();var $=w(O()),xe=w(X());l();n();var b={handler:"_handler_18xte_1",disabled:"_disabled_18xte_4",keyring:"_keyring_18xte_7",wallet:"_wallet_18xte_11",icon:"_icon_18xte_16",noHandler:"_noHandler_18xte_23"};var Be=({type:r,canDrag:a,listeners:d,disabled:L,getHandlerRef:u})=>a?$.default.createElement(o.Box,{ref:u,...d,className:(0,xe.default)(b.handler,b[r],{[b.disabled]:L})},$.default.createElement(C.IconButton,{className:b.icon,icon:"okx-wallet-plugin-hamburger"})):$.default.createElement(o.Box,{ref:u,...d,className:b.noHandler}),z=Be;l();n();var s=w(O()),we=w(ie()),De=w(X());J();ae();l();n();var N={item:"_item_fqr5s_1",dragging:"_dragging_fqr5s_8",children:"_children_fqr5s_12",wrapper:"_wrapper_fqr5s_15",wallet:"_wallet_fqr5s_19",canDrag:"_canDrag_fqr5s_22",delete:"_delete_fqr5s_25",avatar:"_avatar_fqr5s_33",name:"_name_fqr5s_37",draw:"_draw_fqr5s_43",text:"_text_fqr5s_46",more:"_more_fqr5s_60"};var Me=({keyringIdentity:r,editIdentityName:a,onDragWalletStart:d,onDragWalletEnd:L,editKeyringIdentities:u})=>{let _=r?.walletIdentities||[],{isRpcMode:f}=(0,we.useSelector)(K),p=P(),[m]=v(),c=(0,s.useCallback)(()=>{d(r.keyringId)},[d,r]),k=(0,s.useCallback)(i=>{let h=oe(u),I=h.find(({keyringId:M})=>M===r.keyringId);I.walletIdentities=i,L(h)},[u,r,L]),E=Y(),y=(0,s.useMemo)(()=>r.keyringIdentityType!==D.MNEMONIC&&r.keyringIdentityType!==D.TON_MNEMONIC&&r.keyringIdentityType!==D.MPC,[r]),A=_.length>1;return s.default.createElement(q.Sortable,{uniqueKey:"walletId",itemClassName:N.item,onDragStart:c,itemChildrenClassName:N.children,itemDraggingClassName:N.dragging,itemWrapperClassName:N.wrapper,onDragEnd:k,dataSource:_,withOverlay:!1,renderHandler:({getHandlerRef:i,listeners:h})=>s.default.createElement(z,{type:"wallet",canDrag:A,listeners:h,getHandlerRef:i})},_.map(i=>s.default.createElement(o.FlexBox,{align:o.ALIGN.center,className:(0,De.default)(N.wallet,{[N.canDrag]:A}),key:i.walletId},y?s.default.createElement(o.Box,{className:N.delete},s.default.createElement(C,{className:"okx-wallet-plugin-delete",onClick:()=>E({walletId:i.walletId,keyringType:r.keyringIdentityType})})):null,s.default.createElement(R,{size:R.SIZE.sm,className:N.avatar,walletIdentity:i}),s.default.createElement(o.FlexBox,{align:o.ALIGN.center,direction:o.DIRECTION.vertical,className:N.name,onClick:()=>{a({type:B.WALLETACCOUNT,identity:i,initialName:i.walletName,otherNames:_.map(({walletName:h,walletId:I})=>i.keyringId===I?"":h).filter(Boolean)})}},s.default.createElement(o.FlexBox,{align:o.ALIGN.center,style:{width:"100%"}},s.default.createElement(G.Text,{ellipsis:!0,className:N.text},i.walletName),s.default.createElement(o.Box,{className:N.draw},s.default.createElement(C,{className:"okx-wallet-plugin-draw"}))),s.default.createElement(U,{isRpcMode:f,currentRpcNetwork:p,hiddenAssets:m,walletAsset:i?.walletAsset,unsopportCurrentNetwork:i?.unsupported})),s.default.createElement(H,{className:N.more,to:`${se}?walletId=${i?.walletId}`},s.default.createElement(C.IconButton,{icon:"okx-wallet-plugin-more"})))))},Le=Me;l();n();var g={item:"_item_1os1d_1",children:"_children_1os1d_8",dragging:"_dragging_1os1d_11",wrap:"_wrap_1os1d_15",disabled:"_disabled_1os1d_22",showBottomLine:"_showBottomLine_1os1d_25",keyring:"_keyring_1os1d_35",canDrag:"_canDrag_1os1d_38",delete:"_delete_1os1d_41",name:"_name_1os1d_49",canEdit:"_canEdit_1os1d_53",draw:"_draw_1os1d_56",text:"_text_1os1d_59",more:"_more_1os1d_74"};var Oe=({editIdentityName:r,editKeyringIdentities:a,setEditKeyringIdentities:d})=>{let{isRpcMode:L}=(0,ye.useSelector)(K),u=P(),[_]=v(),f=Y(),p=(0,t.useCallback)(({keyringIdentityType:e})=>e===D.MNEMONIC||e===D.MPC||e===D.TON_MNEMONIC,[]),m=(0,t.useCallback)(({keyringIdentityType:e})=>e===D.MNEMONIC||me(e)||e===D.MPC||e===D.TON_MNEMONIC,[]),[c,k]=(0,t.useState)(""),E=(0,t.useCallback)(({id:e})=>{k(e)},[]),y=(0,t.useCallback)(e=>{k(""),d(e)},[d]),[A,i]=(0,t.useState)(""),h=(0,t.useCallback)(e=>{i(e)},[]),I=(0,t.useCallback)(e=>{i(""),d(e)},[d]),M=a.length>1;return t.default.createElement(q.Sortable,{uniqueKey:"keyringId",itemClassName:g.item,itemChildrenClassName:g.children,itemDraggingClassName:g.dragging,onDragStart:E,onDragEnd:y,dataSource:a,withOverlay:!1,renderHandler:({getHandlerRef:e,listeners:j})=>t.default.createElement(z,{type:"keyring",canDrag:M,listeners:j,disabled:A,getHandlerRef:e})},a.map((e,j)=>t.default.createElement(o.Box,{className:(0,V.default)(g.wrap,{[g.disabled]:A&&A!==e.keyringId,[g.showBottomLine]:j!==a.length-1}),key:e.keyringId},t.default.createElement(o.FlexBox,{align:o.ALIGN.center,className:(0,V.default)(g.keyring,{[g.canDrag]:M})},p(e)?t.default.createElement(o.Box,{className:g.delete},t.default.createElement(C,{icon:"okx-wallet-plugin-delete",onClick:()=>f({keyringId:e.keyringId,keyringType:e.keyringIdentityType})})):null,t.default.createElement(o.FlexBox,{align:o.ALIGN.center,direction:o.DIRECTION.vertical,className:(0,V.default)(g.name,{[g.canEdit]:m(e)}),onClick:()=>{m(e)&&r({type:B.WALLET,identity:e,initialName:e.keyringName,otherNames:a.map(({keyringName:Te,keyringId:ke})=>e.keyringId===ke?"":Te).filter(Boolean)})}},t.default.createElement(o.FlexBox,{align:o.ALIGN.center,style:{width:"100%"}},t.default.createElement(G.Text,{ellipsis:!0,className:g.text},e.keyringName),m(e)?t.default.createElement(o.Box,{className:g.draw},t.default.createElement(C,{icon:"okx-wallet-plugin-draw"})):null),t.default.createElement(U,{isRpcMode:L,currentRpcNetwork:u,hiddenAssets:_,walletAsset:e?.walletAsset})),[D.PRIVATE_KEY].includes(e.keyringIdentityType)?null:t.default.createElement(H,{className:g.more,to:`${ne}?keyringId=${e?.keyringId}`},t.default.createElement(C.IconButton,{icon:"okx-wallet-plugin-more"}))),c===e.keyringId?null:t.default.createElement(Le,{keyringIdentity:e,editIdentityName:r,onDragWalletStart:h,onDragWalletEnd:I,editKeyringIdentities:a}))))},he=Oe;l();n();var Z=w(O());J();Q();var be=r=>{let a=fe(),d=pe(),L=ce(),u=(0,Z.useMemo)(()=>({async[B.WALLET](_,f){let p=_?.keyringId;if(p)try{await d(p,f),r(m=>m.map(c=>c.keyringId===p?{...c,keyringName:f}:c)),S.success(W("wallet_edit_wallet_toast_renamed_success"))}catch(m){console.log(m)}},async[B.WALLETACCOUNT](_,f){let p=_?.walletId;if(p)try{await L(p,f),r(m=>m.map(c=>{let k=c?.walletIdentities??[];return{...c,walletIdentities:k.map(E=>E.walletId===p?{...E,walletName:f}:E)}})),S.success(W("wallet_edit_wallet_toast_renamed_success"))}catch(m){console.log(m)}}}),[L,d,r]);return(0,Z.useCallback)(({identity:_,...f})=>{a(f).then(p=>{let{type:m}=f,c=u[m];c&&c(_,p)}).catch(re)},[u,a])},Ce=be;l();n();var Ee={root:"_root_nqk5m_1",headerDone:"_headerDone_nqk5m_1"};var Fe=()=>{let[,r]=ue(null),[a,d]=(0,x.useState)(r),L=Ce(d),[u,_]=(0,x.useState)(!1),f=y=>{d(y),_(!0)},p=(0,Ae.useHistory)(),m=ge(),[c,k]=(0,x.useState)(!1),E=(0,x.useCallback)(async()=>{if(u){k(!0);try{let y={},A={};a.forEach(({keyringId:i,walletIdentities:h},I)=>{y[i]=I,h.forEach(({walletId:M},e)=>{A[M]=e})}),await m(y,A)}catch(y){console.log(y),S.error({title:W("extension_wallet_toast_sorting_failure")})}}p.push(`${le}?from=seedVerify`)},[p,m,a,u]);return(0,x.useEffect)(()=>{!te(r,a)&&!u&&d(r)},[r,a]),x.default.createElement(o.Container,{className:Ee.root},x.default.createElement(_e,{backable:{icon:"okds-close"},bordered:!1,closeable:!1}),x.default.createElement(he,{editIdentityName:L,editKeyringIdentities:a,setEditKeyringIdentities:f}),x.default.createElement(Ne,{isLoading:c,onDone:E}))},Eo=Fe;export{Eo as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=WalletEdit-KNIKHB7P.js.map
