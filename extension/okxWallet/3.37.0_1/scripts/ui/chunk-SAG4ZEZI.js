import{b as re,c as oe,d as ne,e as W,f as T,l as se}from"./chunk-E4DPTHXM.js";import{a as me}from"./chunk-OG5JWNZH.js";import{b as G,c as l}from"./chunk-PF2X6IYY.js";import{c as C}from"./chunk-Z6RMGQXT.js";import{c as ue}from"./chunk-BLEQOMHN.js";import{d as ie,k as ce}from"./chunk-SEXC6U4O.js";import{c as ae}from"./chunk-RCQMEJEP.js";import{Ma as E,N as J,Na as R,Ya as te,pb as x,sa as L,ta as w,ua as ee}from"./chunk-WTBIP24L.js";import{k}from"./chunk-HWYDZOOB.js";import{a as z}from"./chunk-F7IOPQEO.js";import{a as S,b as Re}from"./chunk-BUAMOL6H.js";import{L as X,M as j,S as K,a as Y,b as F,g as $,pa as U}from"./chunk-5BQQ5BTM.js";import{F as Q,J as Z,N as _,a as d,b as V,g as q}from"./chunk-4IQZG47E.js";import{a as Pe}from"./chunk-WQYVBC56.js";import{f as B,m as a,o as i}from"./chunk-CS4SUKWE.js";a();i();_();function fe(){let{pathname:t}=Q();return t.endsWith(W)||t.endsWith(T)}function I(){return(d()||l())&&fe()}a();i();U();_();Re();a();i();_();var Te=t=>{let{pathname:e}=ue(t);return ee.find(o=>new RegExp(o.reg).test(e))?.params||{}},Ie="dex_source_env",Ae="dex-swap/bridge",Ce="dex-swap/meme",N=()=>{if(d())return{};if(l())return G.g.get(Ie);if(R()){let t=L.SWAP,e=window?.location?.hash;e?.indexOf(Ae)>-1?t=L.BRIDGE:e?.indexOf(Ce)>-1&&(t=L.MEME);let r=w.PLUGIN;return me()&&(r=w.TGAPP,G.get("pageSource")==="bot"&&(r=w.COMMAND)),{source:r,business_type:t,trade_dialog:"no"}}return Te(window.location.href)};a();i();U();function D(t){let e={...t};return Object.keys(e).forEach(r=>{let o=t[r];(X(o)||o===""||j(o))&&delete e[r]}),e}var we=[0],mt=()=>new AbortController,xe=()=>Promise.reject(),ft=t=>t?.status===S.STATUS_CODE?.ERR_CANCELED;async function O(t={}){let e=t;if(R()&&(e=await k.global?.interceptorHeaders(t),e.url=`https://${k.global.getApiHostname()}${e.url}`),!d()&&l()&&!R()){e.headers||(e.headers={});let r=N();e.headers.Referer_URL=r.iframe_referrer,r.widget_version&&(e.headers.Widget_version=N().widget_version)}return F(e.params)&&(e.params=D(e.params)),Y(e.data)?e.data=e.data.map(r=>D(r)):F(e.data)&&(e.data=D(e.data)),e.needSign=!0,e.customToLogin=xe,e}function b(t){return t.then(e=>{let{data:r}=e;return we.includes(r?.code)?r:Promise.reject(r||{})})}var A={};A.get=(t,e)=>b(O({...e,url:t}).then(r=>{let{url:o,...s}=r;return S.get(o,s)}));A.getWithCache=(t,e)=>b(O({...e,url:t}).then(r=>{let{url:o,...s}=r;return S.getWithCache(o,{cacheSeconds:60*5,...s})}));A.post=(t,e,r)=>b(O({...r,url:t,data:e,method:"post"}).then(o=>{let{url:s,data:n,...f}=o;return S.post(s,n,f)}));A.delete=(t,e,r)=>b(O({...r,url:t,data:e,method:"delete"}).then(o=>{let{url:s,...n}=o;return S.delete(s,n)}));var pt=A;a();i();_();a();i();a();i();var y=B(z());_();function We(){let t=(0,y.useLocation)(),e=(0,y.useHistory)(),r=c=>{e.replace(c)},o=c=>{e.push(c)},s=c=>{let m=`${c.pathname||t.pathname}${c.search||""}${c.hash||""}`;Z(m,"_self")};return{replace:(c,u)=>{([E.WALLET_DASHBOARD,E.MARKET].includes(c)?s:r)(u)},pushFn:(c,u)=>{([E.WALLET_DASHBOARD,E.MARKET].includes(c)?s:o)(u)}}}var pe=We;a();i();U();function v({from:t,to:e,inputAmount:r,feeConfig:o,btcAddressType:s}={}){let n=new URLSearchParams,f=(u,m)=>{ce(m?.chainId)&&n.set(`${u}Chain`,m.chainId),m?.tokenContractAddress&&n.set(`${u}Currency`,m.tokenContractAddress)},c=u=>{u?.referrerAddress&&u?.feePercent&&(n.set("referrerAddress",u.referrerAddress),n.set("feePercent",u.feePercent))};return f("input",t),f("output",e),c(o),r&&n.set("inputAmount",r),s&&n.set("addressType",s),n}function de(t={}){let e=v(t);e.delete("referrerAddress"),e.delete("feePercent");let r=K(t,["from","to","inputChain","inputCurrency","outputChain","outputCurrency","inputAmount","feeConfig","btcAddressType","tokenPair","bridgeTokenPair"]);return $(r).forEach(o=>{e.set(o,r[o])}),e}function le(t,e){let r=s=>{let n=f=>{let c=t.get(`${s}${f}`);return!c&&e&&(c=t.get(`${s}Limit${f}`)),c};return{chainId:n("Chain"),tokenContractAddress:n("Currency")}},o=()=>{let s=t.get("referrerAddress"),n=t.get("feePercent");return l()&&s&&n&&!ae(n)?{referrerAddress:s,feePercent:n}:{}};return{from:r("input"),to:r("output"),inputAmount:t.get("inputAmount"),feeConfig:o(),btcAddressType:t.get("addressType"),autoSwitch:t.get("autoSwitch")}}function Ee(t,e){return!t||!e?"":t===E.OKX_WALLET_EXTENSION?e:se(e)}a();i();var he=B(Pe()),ge=B(z());function De(){let{hash:t,search:e}=(0,ge.useLocation)(),r=t&&t.indexOf("#")>-1?t.slice(1):t;return(0,he.useMemo)(()=>new URLSearchParams(e||r),[e,r])}var _e=De;function Oe(t){let{commonStore:e}=C(),{portal:r,computedCurrentTabIsLimit:o}=e,s=_e(),n=pe(),f=({pathname:u,params:m}={})=>{let h=Ee(r,u),P=I()?de(m).toString():v(m).toString(),g={};h&&(g.pathname=h),P&&(g.search=`?${P}`),t?n.pushFn(r,g):n.replace(r,g)};return{params:le(s,o),replace:f}}var Se=Oe;var jt=()=>{let{fromToStore:t,accountStore:e,commonStore:r}=C(),{updateFrom:o,updateTo:s,setField:n,advanceSetTypedValue:f}=t,{setCurrentTab:c}=r;return(u,m,h,P)=>{let g=e.isConnectedWallet,M=[];if(c(P,!0),u&&(o({...u,amount:1}),M.push(u.chainId),h)){let H=h===J?"":ie(h,u.decimals);n(te.FROM),f(H,!1,P),o({amount:H})}m&&(s(m),M.push(m.chainId)),g&&t.getSwapTokenBalance()}},Kt=()=>(t,e)=>{let r={from:{chainId:t?.chainId,tokenContractAddress:t?.tokenContractAddress},to:{chainId:e?.chainId,tokenContractAddress:e?.tokenContractAddress}};return r.from.tokenContractAddress&&r.to.tokenContractAddress?r:null},Vt=()=>{let{replace:t}=Se();return r=>{let o=I();switch(r){case x.SWAP:t({pathname:o?W:re});break;case x.BRIDGE:t({pathname:o?T:oe});break;case x.LIMIT_ORDER:t({pathname:ne});break;default:V.error("useReplaceLocationByTab: unknown tab type");break}}};a();i();var zt={YES:1,NO:0},Jt={NETWORK_FEE:"0",FREE_NETWORK_FEE:"1"},er={INTENT_BRIDGE:3},tr={FREE:"1",NOT_FREE:"0"};a();i();_();function be(){let t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),e=[],r;e[8]="-",e[13]="-",e[18]="-",e[23]="-",e[14]="4";for(let o=0;o<36;o++)e[o]||(r=0|q.get()*16,e[o]=t[o==19?r&3|8:r]);return e.join("")}function ar(){if(d())return"";let t=localStorage.getItem("onChainUserId"),e=be();return t||localStorage.setItem("onChainUserId",e),t||e}export{I as a,N as b,mt as c,ft as d,pt as e,be as f,ar as g,Se as h,jt as i,Kt as j,Vt as k,zt as l,Jt as m,er as n,tr as o};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-SAG4ZEZI.js.map
