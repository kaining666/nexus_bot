import{a as Te}from"./chunk-EJIZQC4X.js";import{a as ho,b as xo}from"./chunk-VMWFB4XC.js";import{a as po,b as go}from"./chunk-P2XNHP6C.js";import{a as Qt,b as $t}from"./chunk-ZFYNNC33.js";import{a as yo,b as To}from"./chunk-S7FCI7IZ.js";import"./chunk-AM3AESLS.js";import{a as uo}from"./chunk-2LMYPNN3.js";import"./chunk-452DT4NT.js";import"./chunk-LX2IZ663.js";import"./chunk-2WNLXZON.js";import"./chunk-N4O3LLAF.js";import"./chunk-NDKINFPJ.js";import"./chunk-UKD6YBBS.js";import"./chunk-UGUUG6ML.js";import"./chunk-HZ2WJBGI.js";import"./chunk-LVIROCAQ.js";import"./chunk-YPLQ6VWF.js";import"./chunk-PZK64BR5.js";import"./chunk-HL2M5U7N.js";import"./chunk-U5Z4GNFS.js";import"./chunk-BKZ6VPJ3.js";import{k as Io}from"./chunk-2KFV5OPB.js";import{a as So}from"./chunk-33GCBYOX.js";import{a as co,d as mo,e as fo}from"./chunk-NN5Y2CEE.js";import"./chunk-YZ2KLN72.js";import"./chunk-4KH3NTXU.js";import"./chunk-BQN2HM7G.js";import"./chunk-HWTJIJS5.js";import"./chunk-TW325B3E.js";import"./chunk-ULXBFEFQ.js";import"./chunk-AWJSICVW.js";import"./chunk-6AMXLP7C.js";import"./chunk-M7EHI3O6.js";import{a as wo}from"./chunk-BS7Q63L5.js";import{b as lo}from"./chunk-BBNNZKIC.js";import"./chunk-JTFGGRWS.js";import{i as qt,m as Yt,q as jt,s as Zt}from"./chunk-3U6VG372.js";import{a as zt,b as ye,c as Xt,d as Kt}from"./chunk-CZ3ZPSYV.js";import"./chunk-2OUKWBEW.js";import"./chunk-MKDBLDTZ.js";import"./chunk-P5M6XTEC.js";import"./chunk-G3OZP6IX.js";import"./chunk-3YQP66WR.js";import"./chunk-3R4FWQXC.js";import{a as Ut}from"./chunk-GFGBVWFC.js";import"./chunk-OUXYJKLM.js";import"./chunk-5ARVNWRH.js";import"./chunk-J7NZRERL.js";import"./chunk-AW2VCDDG.js";import{a as er}from"./chunk-UHA6636E.js";import{a as eo}from"./chunk-G4QXX4WT.js";import"./chunk-SP6CEP6W.js";import"./chunk-QNX3UOA4.js";import"./chunk-2NGH2WBA.js";import"./chunk-XLNWZJIM.js";import{g as bt}from"./chunk-T4G5BNXN.js";import"./chunk-Y4W36EYJ.js";import"./chunk-4FP4CS66.js";import"./chunk-N5PE2NEH.js";import"./chunk-JJBV375X.js";import{a as so}from"./chunk-KKGQQZFH.js";import"./chunk-AHXU4X7C.js";import"./chunk-NMI5SIQF.js";import"./chunk-IYJ2R4Y5.js";import"./chunk-FPLAPREM.js";import{a as no,b as ao,d as io}from"./chunk-5J5HPJFS.js";import{a as ro}from"./chunk-4O6B2TSW.js";import{e as vt}from"./chunk-EUSYZW2R.js";import{b as to,c as oo}from"./chunk-AFBCVKXE.js";import"./chunk-MQKFVWSP.js";import"./chunk-VLSOWDRD.js";import{a as Gt,e as Bt,m as Ot,r as Ht,t as Vt}from"./chunk-3UTQU6PS.js";import{a as Jt}from"./chunk-ZQTA27XU.js";import"./chunk-YIQCYGP3.js";import"./chunk-I4BRG34M.js";import"./chunk-HN3RS7KM.js";import{a as Mt}from"./chunk-4JNVSGED.js";import"./chunk-AR6XF3U7.js";import"./chunk-V5XRXBAE.js";import"./chunk-ULBHEX2Q.js";import"./chunk-LYNGOC3B.js";import"./chunk-XS7NMQVU.js";import"./chunk-L7FDIAMD.js";import"./chunk-TXEBE5YY.js";import{d as Rt,f as Wt}from"./chunk-77F6B6US.js";import"./chunk-LLMO6UHT.js";import"./chunk-TGE2FOSE.js";import"./chunk-6G5SGP4W.js";import"./chunk-2NRFLUUO.js";import"./chunk-SAG4ZEZI.js";import"./chunk-E4DPTHXM.js";import"./chunk-BGYKLFZE.js";import"./chunk-WAUW7WG4.js";import"./chunk-OG5JWNZH.js";import"./chunk-PF2X6IYY.js";import"./chunk-67OZVYSW.js";import"./chunk-5J5TSFC4.js";import"./chunk-Z6RMGQXT.js";import"./chunk-BLEQOMHN.js";import"./chunk-SEXC6U4O.js";import"./chunk-IV5YQZMD.js";import"./chunk-BNWEXJ7R.js";import"./chunk-RCQMEJEP.js";import"./chunk-WTBIP24L.js";import{k as Q}from"./chunk-HWYDZOOB.js";import"./chunk-SKYCSHSI.js";import"./chunk-TCSX4HQQ.js";import{c as Ct}from"./chunk-6H3Y45OD.js";import"./chunk-KALOGAGR.js";import{a as ue,i as Ft}from"./chunk-E5Q7T5U3.js";import"./chunk-GOUDWO5Q.js";import{a as $o}from"./chunk-K7LSBRML.js";import"./chunk-Y2MVZAOH.js";import"./chunk-RNSIOLOX.js";import"./chunk-J5KJHQ2S.js";import{a as Oe,b as He,g as ft}from"./chunk-XJHIIAGT.js";import"./chunk-3UYPUTX6.js";import"./chunk-LINATLLG.js";import"./chunk-AUKWYF5J.js";import"./chunk-Q4S2WO7F.js";import{a as Pt,b as At}from"./chunk-WLGBPOGB.js";import"./chunk-DXILVGXO.js";import"./chunk-YHUQOYS5.js";import{a as pe}from"./chunk-Z3AVDJYR.js";import"./chunk-DYCW5JBN.js";import"./chunk-OMBHHY6I.js";import"./chunk-CKRUHP35.js";import"./chunk-P6N6KWSS.js";import"./chunk-U65S63W6.js";import"./chunk-EHLWSSX4.js";import"./chunk-DKAHQZW7.js";import"./chunk-OB7EIG6I.js";import"./chunk-CBYWE4ZS.js";import"./chunk-YNP5EQNA.js";import"./chunk-TGTCJHHS.js";import"./chunk-PQ3PMTLX.js";import"./chunk-AHWM6USP.js";import"./chunk-DFIMOBBJ.js";import"./chunk-RD5QD7MH.js";import{a as _t}from"./chunk-6IJDRLPZ.js";import"./chunk-PO23PKFU.js";import"./chunk-HVTJXLNW.js";import"./chunk-ESXBSF3B.js";import"./chunk-PNY3TA7V.js";import{j as Nt}from"./chunk-4AVGLJGA.js";import"./chunk-TQ3GWPOH.js";import"./chunk-PYZXP3W4.js";import"./chunk-QDNQKTGP.js";import"./chunk-3QF6VHEM.js";import"./chunk-BDM2VHZE.js";import{a as ge}from"./chunk-64SQYTOJ.js";import{a as de}from"./chunk-FYP53U2P.js";import"./chunk-Z4OLA6VU.js";import"./chunk-5O3SURTC.js";import{h as Lt}from"./chunk-NMBDO6HS.js";import"./chunk-55MCSU6E.js";import"./chunk-OPNT5XFL.js";import"./chunk-MDLQ46WE.js";import{a as Dt}from"./chunk-FQEN5BEF.js";import"./chunk-KRXFQR7K.js";import{a as kt}from"./chunk-CE23KTLV.js";import"./chunk-ZL32ASCM.js";import"./chunk-3TUBCZ6Z.js";import"./chunk-5RWJB7PM.js";import{a as mt}from"./chunk-UOK5DCVS.js";import"./chunk-O4AMPUEN.js";import"./chunk-AACZ2HW4.js";import"./chunk-M2U4YLEL.js";import{e as lt}from"./chunk-ZBGU2467.js";import{o as le}from"./chunk-DD3BDKUM.js";import{H as me,Ha as it,I as q,J as Y,Ja as st,N as nt,Pb as It,R as at,Va as ct,bc as wt,eb as ut,ob as pt,p as Je,qb as dt,sb as gt,ub as yt,yb as Tt,zb as j}from"./chunk-TYUTKD3A.js";import"./chunk-ENPA2E7U.js";import{F as et,M as ce,V as tt,_ as ot,fa as rt,p as Qe,v as se,x as $e}from"./chunk-WOHVJ5VI.js";import"./chunk-HXEPH4TB.js";import{a as Qo}from"./chunk-F7IOPQEO.js";import{a as St,b as Z}from"./chunk-QBSBGD35.js";import"./chunk-GFKCYZVW.js";import"./chunk-CHLBHCPL.js";import"./chunk-NC7RXVWZ.js";import{d as w,f as ae}from"./chunk-DM24NLHH.js";import"./chunk-PTVNLPKV.js";import"./chunk-JFKXAMRK.js";import{a as Et}from"./chunk-V2SICOMY.js";import{a as ht,u as xt}from"./chunk-Z6Y7MSRE.js";import{c as fe}from"./chunk-FVQK2MNN.js";import"./chunk-5Z5B37ND.js";import{$ as W,Aa as Re,Ab as Ge,Ac as K,Bb as Be,Cb as Ko,Gb as H,Ha as We,Hb as Ve,Ib as X,Ja as re,Oc as J,Qc as qe,V as oe,Vb as Ue,Wc as Yo,X as Le,Xa as L,Xc as Ye,Yc as jo,aa as F,d as Fe,da as _e,dc as ze,e as zo,fc as Xe,gc as Ke,hc as Jo,ia as De,ic as ne,ja as Ne,la as U,mb as O,o as te,oc as qo,qa as M,u as Ae,vb as Me,xa as be,xb as ve,y as ke,za as z,zc as _}from"./chunk-QWQGBYOY.js";import"./chunk-BUAMOL6H.js";import"./chunk-PLHFXPVU.js";import{f as Ce,j as E,o as Ee,pa as B,r as Pe}from"./chunk-5BQQ5BTM.js";import{N as ee,w as P}from"./chunk-4IQZG47E.js";import"./chunk-BKLQOL2X.js";import"./chunk-AJ3QZWYK.js";import{b as Xo}from"./chunk-4USCG7JU.js";import"./chunk-4LMFCZAJ.js";import"./chunk-GBWBODBO.js";import"./chunk-X62Q7VCJ.js";import"./chunk-X7RY3AWM.js";import{a as R}from"./chunk-WQYVBC56.js";import{W as Ze,t as ie,v as je}from"./chunk-MX777P4Z.js";import"./chunk-GW6IXZ75.js";import"./chunk-LSOIOGAP.js";import"./chunk-54ZU3WOZ.js";import{a as Zo}from"./chunk-E4IUBLG2.js";import"./chunk-ZHO63NRG.js";import"./chunk-IDFKEYEO.js";import"./chunk-GMY3CGN4.js";import"./chunk-SGN6V33I.js";import"./chunk-J52BXABX.js";import"./chunk-FBMAZNAP.js";import"./chunk-H3AZE3V6.js";import"./chunk-7PMBWAQJ.js";import"./chunk-Z37CYTXG.js";import"./chunk-ADNFNM5R.js";import"./chunk-ZP73ZDSP.js";import"./chunk-W3TSI3ZZ.js";import"./chunk-JSF2EI74.js";import"./chunk-NEPE2TQC.js";import"./chunk-U3RFT4V5.js";import"./chunk-IUPPNX62.js";import"./chunk-V4AYO3RB.js";import"./chunk-HQMURPEG.js";import"./chunk-56JXL4SQ.js";import"./chunk-METSMHFB.js";import{f as y,l as process,m as T,o as I}from"./chunk-CS4SUKWE.js";T();I();var V=y(R()),C=y(wt()),$=y(Qo()),Uo=y(le());B();ee();Jo();zo();ke();J();Me();L();jo();Yo();Ko();T();I();var Ie=y(R());ee();L();var Fo=({visible:t,onClose:e,onChange:o,walletId:n})=>Ie.default.createElement(Te,{visible:t,onClose:e,onChange:o,coinId:be,walletId:n},Ie.default.createElement(Te.Header,{title:P("extension_defi_top_header_title_select_address_type"),subTitle:P("extension_defi_popup_desc_new_address_default")}));T();I();var Co=y(R()),Eo=y(le());B();var Po=y($o());ae();J();L();var tr=({walletId:t,txParams:e,onConfirm:o,onCancel:n,backable:a=!1,onBack:r,asPage:i})=>{let s=Lt(t),m=_t(F,s?.walletId),c=Vt({coinAmount:0,localType:F,coinId:Re,fromAddr:m,walletId:s?.walletId,txSource:K.DAPP}),f={localType:F,params:{transaction:e},walletId:s?.walletId},l=(0,Eo.useMemoizedFn)(async({networkFee:u})=>{let{raw_data:p,raw_data_hex:d,txID:S,visible:x}=e||{};try{let h=await w().signCommonMessage(m,{type:"protobuf",message:JSON.stringify({txID:S,visible:x,raw_data:p,raw_data_hex:d})},F),D=Po.default.address.fromHex(E(p,"contract[0].parameter.value.contract_address",m)),N=await Gt(F,h);await c(h,{toAdr:D,txHash:N,serviceCharge:u}),o?.({txHash:N})}catch(h){o({error:h})}});return Co.default.createElement(go,{backable:a,onBack:r,asPage:i,unapproved:f,onCancel:n,onConfirm:l})},Ao=tr;T();I();var k=y(R()),vo=y(wt());var Go=y(le());B();ee();T();I();var ko=y(R());Xo();L();var or=async(t={})=>{let{contractAddress:e,contractName:o,functionName:n,functionArgs:a}=t,{getRawTransaction:r}=await ue(),i={data:{type:se.CONTRACT_CALL,data:{contract:e,contractName:o,functionName:n,functionArgs:a}}};return await r(5757,i)},rr=async(t={})=>{let{recipient:e,amount:o,memo:n}=t,{getRawTransaction:a}=await ue(),r={data:{type:se.TRANSFER,data:{to:e,amount:o,memo:n}}};return await a(5757,r)},nr=async(t={})=>t.txType===ce.CONTRACT_CALL?or(t):t.txType===ce.STX_TRANSFER?rr(t):"",Lo=async({transaction:t={},fromAddress:e,value:o})=>{let n=await nr(t);return(await So({coinId:We,fromAddress:e,value:o,inputData:n}))?.gasLimit||"0"};T();I();var ar=y(R());B();L();ae();async function _o(t,e){let o=async()=>await q({coinId:re,address:t},{fromAddr:t,toAddr:""}),n=async m=>{let c=E(m,"info.nonce",0),f={type:$e.MULTI_CONTRACT_CALL,nonce:c,maxFee:0,chainId:Qt.StarknetChainId.SN_MAIN,multiContractCallData:{from:t,calls:e}};return(await w().signTransaction(f,t,U))?.signature},a=async m=>{let{data:c}=await Y({coinId:re,address:t,inputData:m});return c?.gasLimit},r=await o(),i=await n(r);return await a(i)}qo();ke();J();L();Xe();ae();T();I();var Do=y(er()),Se=y(Zo());B();J();Me();L();Xe();async function No(t,e){return(await Ft()).address.fromHex(E(t,"raw_data.contract[0].parameter.value.contract_address",e))}function bo(t){return E(t,"raw_data.contract[0].parameter.value.data","")}function Ro(t){let e=E(t,"raw_data.contract[0].parameter.value.call_value"),o=E(t,"raw_data.contract[0].parameter.value.amount","");return e||o}async function ir(t){let{data:e={}}=await me({coinId:z,address:t},{fromAddr:t}),{info:o={}}=e;return o}async function sr(t,e){let{transaction:o,bizType:n,bizId:a=[],notReplaceBlockhash:r=!1}=t,i=null,s=()=>typeof t?.toJSON=="function"?t:t?.instruction,{recentBlockhash:m,lastValidBlockHeight:c}=await ir(e),f=s();return f?i=new ie({feePayer:e,blockhash:m,lastValidBlockHeight:c}).add(f):o&&(r||(o instanceof je?o.message.recentBlockhash=m:(o.signatures=[],o.recentBlockhash=m),o.lastValidBlockHeight=c,a.forEach(l=>{let u=(0,Do.mnemonicToSeed)(n,l),p=Ze.fromSeed(u.slice(0,32));o?.version>=0?o.sign([p]):o.partialSign(p)})),i=o),i}async function Wo(t,e){let o=await sr(t,e);return o instanceof ie?Se.default.encode(o.serialize({requireAllSignatures:!1,verifySignatures:!1})):Se.default.encode(o.serialize())}function G(t){let e=O({netWorkId:String(t)}),o=e?.baseChain||"",n=e?.localType||"",a=e?.coinId||3,r=e?.realChainIdHex;return{baseCoinId:a,networkType:n,chainId:r,baseChain:o}}async function we({networkId:t,address:e,data:o,tokenAddress:n}){let a={},{baseCoinId:r}=G(t),i={coinId:r,address:e},s={fromAddr:e,value:"0"},m={address:e,inputData:o,coinId:r,value:"0",tokenAddress:n},{data:c}=await Y(m),{gasLimit:f}=c,{data:{info:l}}=await me(i,s),u=l?.needExtFee||!1,p=l?.gasPrice||{},{normal:d,proposePriorityFee:S,supportEip1559:x}=p;if(!u)return a={maxFeePerGas:d,maxPriorityFeePerGas:S,gasPrice:d,gasLimit:f,supportEip1559:x,networkFee:H(d,f)},a;let h={from:e,to:n,data:o,value:Z(0),gasPrice:Z(d),gasLimit:Z(f)},D=Je(h),N=await Ut(D),b=await nt({coinId:r},{inputData:N}),g=X(H(d,f),b);return a.networkFee=g,a.extFee=b,a}function A(t,e){return ze(Ve(t,10**e))}var cr=({code:t,data:e,error_message:o,error:n})=>{if(t!==0||!e||e.queryGasLimitErrorUseDefault||n)return{fee:0,error:o};let{gasLimit:a="0"}=e;return{...e,fee:a,error:!1}};async function he({walletId:t,coinId:e,fromAddr:o,tx:n}){let a=n[0],r=a?.messages||[],i=a?.network||1,s=r?.valid_until||Math.floor(Date.now()/1e3)+600,{address:m}=r[0]||{},c=await q({coinId:e,address:o,toAddr:m,fromAddr:o}),f=c?.chainId,l=c?.info?.nonce,u=await ho({nonce:l,localType:M,fromAddr:o,walletId:t,messages:r,network:i,validUntil:s}),p=JSON.stringify(u.stringInputParams),d=await xo({fromAddr:o,chainId:f,coinId:e,inputData:p}),S=cr(d),x={coinId:e,coinAmount:0,inputData:p,fromAdr:o,toAdr:m,serviceCharge:S?.fee,extJson:JSON.stringify({nonce:l}),txSource:K.DEX,accountId:t,walletType:rt.IMPORT,transactionParams:u?.transactionParams};return{feeInfo:S,extParams:x}}var Mo=-42412,mr=-42418,fr=Pe(Xt,500);function Bo(t,e){let{baseCoinId:o}=G(t),n=ge(),a=Rt(e?void 0:o,void 0,e?{chainId:+t,address:e}:void 0);return Wt(a?.coinId,n,{withBalanceStatus:!0})}async function lr({coinId:t=3},{gasInfo:e={},calldata:o}){let{networkFee:n,isNetworkFeeLoading:a,isGasLimitLoading:r}=e,i=a||r,{minGasFee:s}=zt(e),m=Ue(s),c=ye(e,"swap"),f=await fr(t,o),l=c||f;return l===!0&&(l=P("swaptrade_extension_cinteraction_might_error")),{fee:m,feeInt:s,maxFeeInt:n,loading:i,error:l}}async function ur(t,{decimals:e},{calldata:o}){let{transaction:n}=o,{fee:a}=await at({coinId:z,address:t}),r;if(n){let c=st(n);r=it(n,c)}let{totalPriorityFee:i}=await yo([r]),s=X(a,i);return{fee:A(s,e),feeInt:s}}async function pr(t,{decimals:e},{calldata:o}){let n=await wo({address:t,transaction:o});return{fee:A(n,e),feeInt:n}}async function dr(t,{decimals:e},{calldata:o}){let n=await po({address:t,inputData:bo(o),toAddr:await No(o,t),value:Ro(o)});return{fee:A(n,e),feeInt:n}}async function gr(t,{decimals:e},{calldata:o}){let n=Io.from(o.transactionBlock);n.setSenderIfNotSet(t);let a=n?.blockData?.gasConfig?.budget||"0";return{fee:A(a,e),feeInt:a}}async function yr(t,{decimals:e},{calldata:o}){let n=await Lo({transaction:o,fromAddress:t,value:"0"});return{fee:A(n,e),feeInt:n}}async function Tr(t,{decimals:e},{calldata:o}){let n=await _o(t,o);return{fee:A(n,e),feeInt:n}}async function Ir(t,{decimals:e,coinId:o,chainId:n},a,{calldata:r}){let i=await he({walletId:a,fromAddr:t,coinId:o,chainId:n,tx:r}),s=i.feeInfo.fee,m=i.feeInfo.error;return{fee:A(s,e),feeInt:s,error:m}}function Oo(t,e){let o=ge(),{baseChain:n,baseCoinId:a}=G(t),{baseCoin:r}=Mt(a,!0),i=de(n),{symbol:s}=(0,vo.useSelector)(j),m=Nt(a)||0,[c,f]=(0,k.useState)(0),[l,u]=(0,k.useState)(0),[p,d]=(0,k.useState)(0),[S,x]=(0,k.useState)(!1),[h,D]=(0,k.useState)(!1),N=(0,k.useMemo)(()=>{let b=H(c,m);return{estimatedGasFeeInt:l,maxGasFeeInt:p,decimals:r?.decimals,currencyAmount:b,currencySymbol:s,coinSymbol:r?.symbol,loading:S,error:h}},[r.decimals,r.symbol,s,h,l,p,S,m,t,e,e?.gasInfo?.isNetworkFeeLoading,e?.gasInfo?.isGasLimitLoading]);return(0,Go.useDeepCompareEffect)(()=>{async function b(){let g={fee:0,feeInt:0};x(!0),D(!1);try{n===oe?g=await lr(r,e):n===W?g=await ur(i,r,e):n===_e?g=await pr(i,r,e):n===De?g=await gr(i,r,e):n===F?g=await dr(i,r,e):n===Ne?g=await yr(i,r,e):n===U?g=await Tr(i,r,e):n===M&&(g=await Ir(i,r,o,e)),f(g.fee),u(g.feeInt),d(g.maxFeeInt||g.feeInt)}catch{f(0),u(0)}finally{x(!!g.loading),D(g.error)}}b()},[t,e]),N}async function Sr({networkId:t,tx:e,hardwareExtParams:o,checkTxBeforePublish:n,currentWallet:a}){let r=e,{baseChain:i,chainId:s,baseCoinId:m}=G(t);if(i===W){let{account:c}=a,f=c[W];return r.transaction=await Wo(e,f),{target:r}}if(i===oe){if(ye(e?.gasInfo,"swap"))throw new Error(P("wallet_home_toast_network_error"));let f=r.value||r.amount||0,l=G(t).baseCoinId;r={...r,...r.gasInfo};let u=await n({...r,userGasInfo:r.gasInfo,coinId:l,amount:f,baseCoinAmountUse:f}),{nonce:p,updateGasInfo:d={}}=u||{};r.nonce=p,r.maxFeePerGas=d.maxFeePerGas||r.maxFeePerGas,r.maxPriorityFeePerGas=d.maxPriorityFeePerGas||r.maxPriorityFeePerGas,r.gasPrice=d.gasPrice||r.gasPrice;let S=await w().getSelectedWallet(),x=await w().generateFormatedTxParams(t,r),{dispatch:h}=o||{};return h&&(await h(Pt({txParams:x,walletId:S})),r.result=x.result,r.walletId=S),{target:r}}if(i===Le){let c=await w().getSelectedWallet(),f=await w().generateFormatedTxParams(t,r),l=await At(f,f.address,i,c);return r.result=l,r.walletId=c,{target:r}}if(i===M){let{walletId:c,account:f}=a,l=f[M],{extParams:u}=await he({walletId:c,fromAddr:l,coinId:m,chainId:s,tx:e});return{target:r,extParams:u}}return{target:r}}async function xe({networkId:t,tx:e,hardwareExtParams:o,checkTxBeforePublish:n,currentWallet:a}){if(!e)throw new Error("tx is required");let r=e;try{let{target:i,extParams:s}=await Sr({networkId:t,tx:e,hardwareExtParams:o,checkTxBeforePublish:n,currentWallet:a});return r=i,await w().dexSignAndSubmitTransaction(t,r,s)}catch(i){throw i?.data?.originalError?(i.message=i?.data?.originalError?.error_message,i.code=Mo):i?.message===xt?(i.message=P("wallet_extension_swap_error_hardware_not_support"),i.code=Mo):i.code=mr,i}finally{ne()===te&&w().focusLastOkPopupWithCache()}}async function Ho(t,e){let o=e;try{return typeof e=="string"&&(o=JSON.parse(e)),await w().dexSignTypedDataV4(t,o)}finally{ne()===te&&w().focusLastOkPopupWithCache()}}var Vo=t=>{let{chainId:e}=ut(t),o=pe(t).some(c=>Ct(c.coinId)),n=o?It(t):pe(t),a;o?a=n.find(c=>c.realChainIdHex===e)||{}:a=n[0]||{};let r=Number(o?a.netWorkId:a.chainId),i=pt(t),s=gt(t);return{walletType:{isMNEMONIC:s[i].keyringIdentityType===_.MNEMONIC,isPRIVATE:s[i].keyringIdentityType===_.PRIVATE_KEY,isHARDWARE:s[i].keyringIdentityType===_.HARDWARE,isMPC:s[i].keyringIdentityType===_.MPC},chainId:r}};Q.initSentry(He,Oe,process.env.APP_VERSION);Q.setGlobal({HARDWALLETERROR:ht,getApiHostname:ve,getStaticHostname:Be,getWssHostname:Ge,LocalStore:Fe,interceptorHeaders:qe,urlConfig:Ye,FeeTypeEnum:tt,TxToastCheckTypeEnum:ot,SolanaTransactionInstanceTypeEnum:et,netWorkIdToLocalType:new Proxy({},{get(t,e){return O({netWorkId:String(e)})?.localType}}),localTypeToBaseCoinId:new Proxy({},{get(t,e){return O({localType:e})?.coinId}}),isTelegramMiniApp:Ke()===Ae,KeyringIdentityTypeEnum:_,RegisterLocalStatusEnum:Qe,hexToDecimal:St,signAndSubmitTransaction:xe,signTypedDataV4:Ho,signSolanaCommonTransaction:ct,getGasPrice:we,checkMPCStatus:Jt,hooks:{useCoin:Bo,useUtxoListFn:qt,useFeeDisplay:Oo,useRegisterStatus:$t,useGasReturnActivity:vt,useSignInfo:Ht,useUtxoEstimateFee:jt,useUtxoCheckBeforePublishFn:Yt,useUtxoSignAndPublishTransactionFn:Zt,usePreExecuteFn:Ot},components:{EvmConfirm:fo,TronConfirm:Ao,EthereumNetworkFee:Kt,SupplyGas:Bt,StarknetRegister:so,Affix:kt,InteractiveAddress:oo,NetworkFeeEnter:ro,ViewData:uo,SectionWrap:no,ModuleWrap:to,TipMessage:io,CoinSummary:ao,UtxoNetworkFeePanel:lo,Mev:mo,Layout:fe,SwitchAddress:Fo,Navigator:Dt,SolanaEntry:To}});var wr=()=>{let t=(0,$.useHistory)(),{pathname:e}=(0,$.useLocation)(),o=(0,C.useSelector)(Tt);return(0,V.useCallback)((n,a)=>{if(o&&a){t.replace(mt);return}n()},[o,e])},Za=({visibleBar:t})=>{let e=(0,C.useDispatch)(),o=(0,C.useSelector)(j),n=(0,C.useSelector)(yt),a=(0,C.useSelector)(ft),r=eo(),i=(0,C.useSelector)(dt),s=(0,C.useSelector)(lt),m=(0,C.useSelector)(Vo),c=i.map(u=>{if(Et(u.initialType)){u=Ee(u);try{delete u.account[W],delete u.account[F]}catch{Ce()}}return u}),f=wr(),l=co();return(0,Uo.useMount)(()=>{Q.updateGlobal({signAndSubmitTransaction:async(u,p,d)=>await xe({networkId:u,tx:p,hardwareExtParams:d,checkTxBeforePublish:l,currentWallet:n})})}),V.default.createElement(fe.Box,{style:{height:t?"calc(100% - 54px)":"100%"}},V.default.createElement(bt,{t:P,dispatch:e,onBack:f,currency:o,currentWallet:n,localeData:a,addressBookList:r,walletList:c,locale:s,walletInfo:m}))};export{Za as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=dex-AVHUTN4S.js.map
