import{a as z}from"./chunk-GO26N5U6.js";import{a as f,b as B}from"./chunk-DB5G3ZDJ.js";import{a as P,b as v}from"./chunk-GALOTWRD.js";import"./chunk-PO23PKFU.js";import"./chunk-HVTJXLNW.js";import"./chunk-FQEN5BEF.js";import{p as T}from"./chunk-KRXFQR7K.js";import{a as k}from"./chunk-CE23KTLV.js";import{a as N}from"./chunk-UOK5DCVS.js";import"./chunk-O4AMPUEN.js";import"./chunk-AACZ2HW4.js";import"./chunk-M2U4YLEL.js";import"./chunk-ZBGU2467.js";import{o as D}from"./chunk-DD3BDKUM.js";import"./chunk-TYUTKD3A.js";import"./chunk-WOHVJ5VI.js";import"./chunk-HXEPH4TB.js";import"./chunk-F7IOPQEO.js";import"./chunk-GFKCYZVW.js";import"./chunk-CHLBHCPL.js";import"./chunk-NC7RXVWZ.js";import{d as x,f as Y}from"./chunk-DM24NLHH.js";import"./chunk-FVQK2MNN.js";import"./chunk-QWQGBYOY.js";import"./chunk-BUAMOL6H.js";import{D as a,H as S,q as t}from"./chunk-PLHFXPVU.js";import"./chunk-5BQQ5BTM.js";import{N as M,w as e}from"./chunk-4IQZG47E.js";import"./chunk-4USCG7JU.js";import"./chunk-4LMFCZAJ.js";import"./chunk-GBWBODBO.js";import{ca as w}from"./chunk-X62Q7VCJ.js";import"./chunk-X7RY3AWM.js";import{a as G}from"./chunk-WQYVBC56.js";import"./chunk-MX777P4Z.js";import"./chunk-GW6IXZ75.js";import"./chunk-LSOIOGAP.js";import"./chunk-54ZU3WOZ.js";import"./chunk-E4IUBLG2.js";import"./chunk-GMY3CGN4.js";import"./chunk-7PMBWAQJ.js";import"./chunk-Z37CYTXG.js";import"./chunk-W3TSI3ZZ.js";import"./chunk-JSF2EI74.js";import"./chunk-56JXL4SQ.js";import"./chunk-METSMHFB.js";import{f as F,m as u,o as _}from"./chunk-CS4SUKWE.js";u();_();var s=F(G()),l=F(D());M();Y();u();_();var A={root:"_root_1r48s_1"};var is=({history:L})=>{let n=a.useForm(),[r,Z]=s.default.useState({}),[O,E]=s.default.useState(null),[h,{setTrue:U,setFalse:y}]=(0,l.useBoolean)(!1),c=(0,s.useRef)(),I=(0,l.useMemoizedFn)(()=>{c.current=T(r.oldPassword).then(()=>(E(null),n.cleanErrors("oldPassword"),!0)).catch(()=>{let o=e("wallet_set_password_errortip_password_wrong");return E(o),n.setErrors({oldPassword:o}),!1})});(0,l.useThrottleEffect)(()=>{!r.oldPassword||I()},[r.oldPassword],{wait:500});let g=!!O||!r.oldPassword||!r.password||!r.confirm||r.password?.length<P||r.confirm?.length<P,b=(0,l.useMemoizedFn)(async()=>{let{password:o,confirm:m}=r;if(g||h)return;if(o!==m){n.setErrors({confirm:e("wallet_settings_reset_passord_errortip_input_error")});return}if(U(),c.current||I(),!await c.current){y();return}await x().modifyPassword(m)&&(S.success(e("wallet_edit_wallet_toast_renamed_success")),L.push(N)),y()},[g,r]),C=(0,s.useCallback)(async o=>{(o?.key==="Enter"||o?.keyCode===13)&&await b()},[]),V=z();return(0,s.useEffect)(()=>(document.addEventListener("keydown",C),()=>{document.removeEventListener("keydown",C)}),[]),s.default.createElement(B,{className:A.root,title:e("wallet_settings_reset_passord_maintitle_reset_password"),desc:e("wallet_extension_subtitle_password_unlock")},({formClass:o,formErrorClass:m,itemClass:p})=>s.default.createElement(a,{form:n,size:t.SIZE.lg,validateTrigger:["onChange","onBlur"],className:o,errorClassName:m,onValuesChange:(i,d)=>{Z(d)}},s.default.createElement(a.Item,{name:"oldPassword",style:{marginBottom:0},label:e("wallet_settings_reset_passord_subtitle_old_password"),className:p},s.default.createElement(t.Password,{autoFocus:!0,autoComplete:"off",size:t.SIZE.xl,inputClassName:f.passwordInput,placeholder:e("wallet_settings_reset_passord_placeholder_input_old_password")})),s.default.createElement(a.Item,{name:"password",style:{marginBottom:0,marginTop:"32px"},className:p,label:e("wallet_settings_reset_passord_subtitle_new_password")},s.default.createElement(t.Password,{autoComplete:"off",size:t.SIZE.xl,inputClassName:f.passwordInput,placeholder:e("wallet_settings_reset_passord_placeholder_input_desc")})),s.default.createElement(a.Item,{noStyle:!0,shouldUpdate:(i,d)=>i.password!==d.password},({getFieldValue:i})=>{let d=i("password");return s.default.createElement(v,{password:d})}),s.default.createElement(a.Item,{name:"confirm",className:p,label:e("wallet_settings_reset_passord_subtitle_password_confirmation"),style:{flex:1,marginTop:"32px"}},s.default.createElement(t.Password,{autoComplete:"off",size:t.SIZE.xl,inputClassName:f.passwordInput,placeholder:e("wallet_settings_reset_passord_placeholder_input_password_confirmation"),onChange:()=>{n.cleanErrors("confirm")}})),s.default.createElement(k.FooterActions,{usePortal:!0,renderNative:!0,affixStyle:V,buttonGroup:[{loading:h,disabled:g,block:!0,type:w.TYPE.highlight,category:w.CATEGORY.fill,size:w.SIZE.lg,onClick:b,btnText:e("wallet_set_password_btn_confirm")}]})))};export{is as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=ResetPassword-TVXABDQX.js.map
