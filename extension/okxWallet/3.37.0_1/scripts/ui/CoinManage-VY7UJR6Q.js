import{a as ke}from"./chunk-2H2ZOLMK.js";import{a as Te}from"./chunk-TMNGU7XK.js";import{a as H,b as q}from"./chunk-CANIX4MR.js";import{a as Ne}from"./chunk-2QN27FNP.js";import{a as W}from"./chunk-M7EHI3O6.js";import{a as Ie,b as be}from"./chunk-WL6TUXBM.js";import"./chunk-HFJWHAAP.js";import{a as xe}from"./chunk-BW7FGUVV.js";import"./chunk-OD66HSTD.js";import{a as N}from"./chunk-AHVS5ZUQ.js";import"./chunk-4JNVSGED.js";import"./chunk-77F6B6US.js";import"./chunk-LLMO6UHT.js";import{c as we}from"./chunk-TGE2FOSE.js";import{l as ye}from"./chunk-6H3Y45OD.js";import"./chunk-KALOGAGR.js";import{c as Le,d as O}from"./chunk-AUKWYF5J.js";import"./chunk-Q4S2WO7F.js";import"./chunk-WLGBPOGB.js";import"./chunk-YHUQOYS5.js";import"./chunk-Z3AVDJYR.js";import"./chunk-DYCW5JBN.js";import"./chunk-U65S63W6.js";import"./chunk-CBYWE4ZS.js";import"./chunk-TGTCJHHS.js";import"./chunk-AHWM6USP.js";import"./chunk-DFIMOBBJ.js";import"./chunk-RD5QD7MH.js";import"./chunk-6IJDRLPZ.js";import{d as fe}from"./chunk-ESXBSF3B.js";import"./chunk-4AVGLJGA.js";import"./chunk-TQ3GWPOH.js";import"./chunk-PYZXP3W4.js";import"./chunk-QDNQKTGP.js";import{d as A}from"./chunk-3QF6VHEM.js";import"./chunk-BDM2VHZE.js";import"./chunk-64SQYTOJ.js";import"./chunk-FYP53U2P.js";import"./chunk-Z4OLA6VU.js";import"./chunk-5O3SURTC.js";import{g as Ae}from"./chunk-NMBDO6HS.js";import"./chunk-55MCSU6E.js";import{a as Se}from"./chunk-FQEN5BEF.js";import"./chunk-KRXFQR7K.js";import{a as ve}from"./chunk-CE23KTLV.js";import{d as he}from"./chunk-ZL32ASCM.js";import"./chunk-3TUBCZ6Z.js";import"./chunk-5RWJB7PM.js";import{G as ue,H as D,a as pe}from"./chunk-UOK5DCVS.js";import{b as Ce}from"./chunk-O4AMPUEN.js";import{q as I}from"./chunk-AACZ2HW4.js";import"./chunk-M2U4YLEL.js";import"./chunk-ZBGU2467.js";import{o as T}from"./chunk-DD3BDKUM.js";import{bc as dt,m as se,r as de,ta as _e,v as me}from"./chunk-TYUTKD3A.js";import"./chunk-ENPA2E7U.js";import"./chunk-WOHVJ5VI.js";import"./chunk-HXEPH4TB.js";import{a as ge}from"./chunk-F7IOPQEO.js";import"./chunk-GFKCYZVW.js";import"./chunk-CHLBHCPL.js";import"./chunk-NC7RXVWZ.js";import"./chunk-DM24NLHH.js";import"./chunk-PTVNLPKV.js";import"./chunk-JFKXAMRK.js";import"./chunk-V2SICOMY.js";import"./chunk-Z6Y7MSRE.js";import{c as x}from"./chunk-FVQK2MNN.js";import"./chunk-5Z5B37ND.js";import{Uc as le,Wc as at,Xc as ce,Yc as st,pb as re,vb as it}from"./chunk-QWQGBYOY.js";import"./chunk-BUAMOL6H.js";import{q as J,y as ae}from"./chunk-PLHFXPVU.js";import"./chunk-5BQQ5BTM.js";import{N as M,w as _}from"./chunk-4IQZG47E.js";import"./chunk-AJ3QZWYK.js";import"./chunk-4USCG7JU.js";import"./chunk-4LMFCZAJ.js";import"./chunk-GBWBODBO.js";import{H as ne,T as ie,Z as P}from"./chunk-X62Q7VCJ.js";import"./chunk-X7RY3AWM.js";import{a as h}from"./chunk-WQYVBC56.js";import"./chunk-MX777P4Z.js";import"./chunk-GW6IXZ75.js";import"./chunk-LSOIOGAP.js";import"./chunk-54ZU3WOZ.js";import"./chunk-E4IUBLG2.js";import"./chunk-GMY3CGN4.js";import"./chunk-FBMAZNAP.js";import"./chunk-H3AZE3V6.js";import"./chunk-7PMBWAQJ.js";import"./chunk-Z37CYTXG.js";import"./chunk-ADNFNM5R.js";import"./chunk-ZP73ZDSP.js";import"./chunk-W3TSI3ZZ.js";import"./chunk-JSF2EI74.js";import"./chunk-56JXL4SQ.js";import"./chunk-METSMHFB.js";import{f as a,m as o,o as r}from"./chunk-CS4SUKWE.js";o();r();var d=a(h()),Xe=a(ge()),et=a(ne());M();o();r();var Ee=a(ke()),Z=a(h());M();o();r();var L={"list-title":"_list-title_17ipt_1",listTitle:"_list-title_17ipt_1","empty-box":"_empty-box_17ipt_6",emptyBox:"_empty-box_17ipt_6","search-text":"_search-text_17ipt_10",searchText:"_search-text_17ipt_10","coin-box":"_coin-box_17ipt_13",coinBox:"_coin-box_17ipt_13","icon-add":"_icon-add_17ipt_13",iconAdd:"_icon-add_17ipt_13","icon-remove":"_icon-remove_17ipt_16",iconRemove:"_icon-remove_17ipt_16","icon-not-remove":"_icon-not-remove_17ipt_20",iconNotRemove:"_icon-not-remove_17ipt_20","clear-icon":"_clear-icon_17ipt_23",clearIcon:"_clear-icon_17ipt_23"};var Be=({renderCoin:e,list:n})=>Z.default.createElement(x.Box,null,Z.default.createElement(I.Text,{className:L.listTitle,size:I.SIZE.xs,type:I.TYPE.secondary},_("wallet_manage_crypto_list_added_crypto")),Z.default.createElement(A,{itemKey:"coinId",renderEmpty:!1,renderItem:e,dataSource:n,component:Ee.default,transitionEnterTimeout:300,transitionLeaveTimeout:300,transitionName:"fade-added"}));o();r();var K=a(h()),Fe=a(T());M();it();var Q=({coin:e,deleteAddedCoinAbled:n,onAction:t,isSearchStatus:s})=>{let[i]=he(),m="",l="",p=be(),f=e?.aggregation;e?.added?n?(m="okx-wallet-plugin-take",l="icon-remove"):(m="okx-wallet-plugin-take",l="icon-not-remove"):(m="okx-wallet-plugin-add",l="icon-add");let S=de({coinId:e?.baseCoinId})&&!!e?.address,w=s&&!f&&!S&&!!e?.address,g=(0,Fe.useCreation)(()=>p(e),[e?.coinId,p]);return K.default.createElement(A.Coin,{className:L["coin-box"],hovered:!1,name:e?.coinId===re?e?.chainName:e?.name,icon:e.image,symbol:e.symbol,address:w&&`${_("wallet_manage_crypto_label_contract_address")}: ${se(e?.address)}`,tag:f?_("wallet_manage_crypto_labels_crypto_multichain"):e.tokenType,hidden:i,balance:g?e.coinAmount:void 0,market:g?e.currencyAmount:void 0},!g&&e?.added?K.default.createElement(Ie,{coinId:e?.coinId,from:ue}):K.default.createElement(Ce.IconButton,{className:L[l],disabled:e?.added&&!n,onClick:()=>{t(e)},icon:{icon:m}}))};o();r();var Y=a(h()),Me=a(ne());var Pe=Y.default.memo(({search:e,setSearch:n,spinLoading:t})=>!e||e.length===0?null:t?Y.default.createElement(P.Circle,{size:P.SIZE.sm}):Y.default.createElement(ie,{className:(0,Me.default)("okds-clear-fill",L.clearIcon),onClick:()=>{n("")}}));o();r();var V=a(h());o();r();var Re=a(h()),ze=a(ge());M();var Ue=()=>{let e=(0,ze.useHistory)();return Re.default.createElement(ae.State,{className:L["empty-box"],title:_("wallet_search_text_search_no_results"),buttonText:_("wallet_manage_crypto_text_add_custom_crypto"),onButtonClick:()=>{e.push(D)}})};var De=({loadingMore:e,searchCoins:n,renderCoin:t,spinLoading:s})=>V.default.createElement(A,{itemKey:"coinId",dataSource:n,renderItem:t,loadingMore:e,renderEmpty:()=>s?null:V.default.createElement(Ue,null)});o();r();var k=a(h()),Oe=a(ke());M();var We=(0,k.forwardRef)(({unAddedLoadingMore:e,renderCoin:n,unAddedLoading:t,unAddedList:s})=>s.length===0?null:k.default.createElement(x.Box,null,k.default.createElement(I.Text,{className:L.listTitle,size:I.SIZE.xs,type:I.TYPE.secondary},_("wallet_manage_crypto_subtitle_popular_crypto")),k.default.createElement(A,{itemKey:"coinId",renderEmpty:!1,renderItem:n,dataSource:s,component:!t&&Oe.default,loadingMore:e,transitionEnterTimeout:300,transitionLeaveTimeout:300,transitionName:"fade"})));o();r();var qe=a(T());o();r();var X=a(h()),He=a(T());function $(e,n){let t=(0,X.useRef)(null),s=(0,X.useRef)(Date.now());return(0,He.useMemoizedFn)((...m)=>{t.current||(e(...m),s.current=Date.now(),t.current=setTimeout(()=>{t.current=null},n))})}o();r();var G=(e,n)=>{if(e.aggregation){let t=n(e.childrenCoin);return{...e,childrenCoin:t}}return e};var Ze=()=>{let e=W(),n=N();return(0,qe.useCreation)(()=>ye(e,n).map(i=>({...i,added:!0})),[e])},Ke=()=>{let e=H();return $(n=>{let t=G(n,e);O(t)},500)};o();r();var Ye=a(dt());var $e=()=>{let{currentNetworkUniqueId:e}=(0,Ye.useSelector)(fe),n=we({netWorkId:e?String(e):void 0}),{data:t,loading:s,run:i}=Ne(),m=t?.supportNetworkList,l=s&&!t?.supportNetworkList?.length,p=!!m&&m.length>0,f="";if(e!==""){let w=n?.coinId;f=(m||[]).find(g=>g.coinId===w)?.name||""}let S=`${D}?network=${f}`;return{supportCustomCoin:p,customCryptoPath:S,customCoinLoading:l,reloadCustomNetworkData:i}};o();r();var b=a(h()),R=a(T());var Ge=()=>{let e=W(),n=N(),[t,s]=(0,b.useState)(""),i=(0,R.useDebounce)(t,{wait:500}),m=(0,b.useCallback)(C=>{s(C.target.value)},[]),[l,p]=(0,b.useState)(!0);(0,b.useEffect)(()=>{p(!!t)},[t]);let{data:f,loadingMore:S,listRef:w}=q({symbolLike:i,aggregation:!0,chainIds:n?[Number(n)]:void 0},{reloadDeps:[i],enableEmptyAccountCoins:!0,beforeRequest:()=>{if(!i)return{list:[],pageNo:0,isNoMore:!0}},onFinally(){p(!1)}}),g=(0,R.useCreation)(()=>new Set(e.map(C=>C.aggregation?C.symbol:C.coinId)),[e]),u=(0,R.useCreation)(()=>(f?.list??[]).map(y=>(y.added=g.has(y.aggregation?y.symbol:y.coinId),y)).sort((y,B)=>B.added-y.added),[g,f?.list]);return{searchListRef:w,search:t,searchCoins:u,searchLoading:l,searchLoadingMore:S,onSearch:m,setSearch:s}};o();r();o();r();var je=a(T());at();st();function Je(){let e=Ae();return(0,je.useMemoizedFn)(async n=>{try{let{code:t}=await le(ce.registerCustomCoinAddr,{coinAddrRegisterList:[{accountId:e,coinId:n}]},{needSign:!0});return t===0}catch{return!1}})}var Qe=()=>{let e=H(),n=Je();return $(async t=>{let s=me(t),i;if(s){if(i=await _e(t),!i)return}else i=t;i=G(i,e),t.added?O(i):await n(i.coinId)&&Le(i)},500)};o();r();var z=a(h()),E=a(T());var Ve=(e=[],n)=>{let t=N(),s=xe(),i=(0,E.useCreation)(()=>new Set(e.map(v=>v.aggregation?v.symbol:v.coinId)),[e]),m=(0,E.useCreation)(()=>Array.from(new Set(Te(e).map(v=>v.coinId))),[e]),{data:l,loading:p,loadingMore:f,listRef:S,reload:w}=q({aggregation:!0,chainIds:t?[Number(t)]:void 0,excludeCoinIds:m},{enable:!s,reloadDeps:[t],enableEmptyAccountCoins:!0}),g=(0,E.usePrevious)(i.size),u=i.size<g;(0,z.useEffect)(()=>{!n&&u&&w()},[u,i.size,n]);let C=(0,E.useCreation)(()=>l?.list?.filter(F=>!i.has(F.aggregation?F.symbol:F.coinId))??[],[l?.list,e])??[],[y,B]=(0,z.useState)(!0);return(0,z.useEffect)(()=>{p||B(!1)},[p]),{unAddedList:C,unAddedListRef:S,unAddedLoading:y,unAddedLoadingMore:f}};o();r();var U={"wallet-coin__manage":"_wallet-coin__manage_1imve_1",walletCoinManage:"_wallet-coin__manage_1imve_1","wallet-coin__manage__search":"_wallet-coin__manage__search_1imve_4",walletCoinManageSearch:"_wallet-coin__manage__search_1imve_4","wallet-coin__manage__spin":"_wallet-coin__manage__spin_1imve_8",walletCoinManageSpin:"_wallet-coin__manage__spin_1imve_8","wallet-coin__manage__spin__hidden":"_wallet-coin__manage__spin__hidden_1imve_11",walletCoinManageSpinHidden:"_wallet-coin__manage__spin__hidden_1imve_11","wallet-coin__manage__spin__auto":"_wallet-coin__manage__spin__auto_1imve_14",walletCoinManageSpinAuto:"_wallet-coin__manage__spin__auto_1imve_14","wallet-coin__manage__spin__custom":"_wallet-coin__manage__spin__custom_1imve_17",walletCoinManageSpinCustom:"_wallet-coin__manage__spin__custom_1imve_17","wallet-coin__manage__tag__title":"_wallet-coin__manage__tag__title_1imve_21",walletCoinManageTagTitle:"_wallet-coin__manage__tag__title_1imve_21","fade-enter":"_fade-enter_1imve_25",fadeEnter:"_fade-enter_1imve_25","fade-added-enter":"_fade-added-enter_1imve_26",fadeAddedEnter:"_fade-added-enter_1imve_26","fade-enter-active":"_fade-enter-active_1imve_30",fadeEnterActive:"_fade-enter-active_1imve_30","fade-added-enter-active":"_fade-added-enter-active_1imve_31",fadeAddedEnterActive:"_fade-added-enter-active_1imve_31",fade:"_fade_1imve_25","fade-added":"_fade-added_1imve_26",fadeAdded:"_fade-added_1imve_26","fade-leave-active":"_fade-leave-active_1imve_41",fadeLeaveActive:"_fade-leave-active_1imve_41","fade-added-leave-active":"_fade-added-leave-active_1imve_42",fadeAddedLeaveActive:"_fade-added-leave-active_1imve_42"};var mt=()=>{let e=(0,Xe.useHistory)(),{customCryptoPath:n,supportCustomCoin:t,customCoinLoading:s,reloadCustomNetworkData:i}=$e(),{searchListRef:m,search:l,searchCoins:p,onSearch:f,searchLoading:S,searchLoadingMore:w,setSearch:g}=Ge(),u=!!l,C=Ze(),{unAddedList:y,unAddedListRef:B,unAddedLoading:v,unAddedLoadingMore:F}=Ve(C,u),tt=Ke(),ee=C?.length>1,ot=Qe();(0,d.useEffect)(()=>{i()},[]);let rt=j=>d.default.createElement(Q,{isSearchStatus:u,coin:j,onAction:tt,deleteAddedCoinAbled:ee}),te=j=>d.default.createElement(Q,{isSearchStatus:u,coin:j,deleteAddedCoinAbled:ee,onAction:ot}),oe=l?S:v,nt=_("wallet_manage_crypto_placeholder_search_coin");return d.default.createElement(x.Container,{className:"wallet-coin__manage"},d.default.createElement(ve,{offsetTop:0,style:{zIndex:100}},d.default.createElement(Se,{sticky:!1,closeable:!1,onBack:()=>{e.push(pe)},title:_("wallet_manage_crypto_maintitle_manage_crypto")}),t&&d.default.createElement(x.Box,{className:U["wallet-coin__manage__search"]},d.default.createElement(J.Search,{value:l,size:J.SIZE.md,placeholder:nt,onChange:f,cleanable:!1,suffix:d.default.createElement(Pe,{search:l,setSearch:g,spinLoading:oe})}))),d.default.createElement(x.Spin,{ref:u?m:B,className:(0,et.default)(U["wallet-coin__manage__spin"],U["wallet-coin__manage__spin__auto"]),loading:!1,size:P.SIZE.lg},!u&&!!t&&d.default.createElement(x.Spin,{loading:s&&!v},d.default.createElement(A.Cell,{className:U["wallet-coin__manage__spin__custom"],isLink:!0,to:n,title:_("wallet_manage_crypto_text_custom_crypto")})),u&&d.default.createElement(De,{itemKey:"coinId",searchCoins:p,renderCoin:te,spinLoading:oe,loadingMore:w}),!u&&d.default.createElement(Be,{list:C,renderCoin:rt}),!u&&d.default.createElement(We,{unAddedList:y,unAddedLoading:v,unAddedLoadingMore:F,renderCoin:te})))},kr=d.default.memo(mt);export{kr as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=CoinManage-VY7UJR6Q.js.map
