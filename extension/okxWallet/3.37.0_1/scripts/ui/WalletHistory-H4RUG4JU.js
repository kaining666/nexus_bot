import{a as Dt,b as Nt,d as wt,e as Bt}from"./chunk-M3H5KGPQ.js";import{d as X}from"./chunk-NCY6HBW5.js";import{a as St}from"./chunk-I3V3LTWE.js";import"./chunk-L7P3BZJD.js";import"./chunk-WM5EQSTW.js";import"./chunk-F2XOXS7H.js";import"./chunk-7SG3FKIF.js";import"./chunk-YZ2KLN72.js";import"./chunk-M7EHI3O6.js";import"./chunk-3U6VG372.js";import"./chunk-P5M6XTEC.js";import"./chunk-G3OZP6IX.js";import"./chunk-3YQP66WR.js";import"./chunk-GFGBVWFC.js";import"./chunk-OUXYJKLM.js";import"./chunk-5ARVNWRH.js";import"./chunk-J7NZRERL.js";import"./chunk-AW2VCDDG.js";import"./chunk-G4QXX4WT.js";import"./chunk-FONBAPXA.js";import"./chunk-2NGH2WBA.js";import"./chunk-MQKFVWSP.js";import"./chunk-VLSOWDRD.js";import"./chunk-3UTQU6PS.js";import"./chunk-ZQTA27XU.js";import"./chunk-YIQCYGP3.js";import"./chunk-I4BRG34M.js";import"./chunk-HN3RS7KM.js";import"./chunk-4JNVSGED.js";import"./chunk-AR6XF3U7.js";import"./chunk-V5XRXBAE.js";import"./chunk-ULBHEX2Q.js";import"./chunk-LYNGOC3B.js";import"./chunk-XS7NMQVU.js";import"./chunk-L7FDIAMD.js";import"./chunk-TXEBE5YY.js";import"./chunk-77F6B6US.js";import"./chunk-LLMO6UHT.js";import"./chunk-TGE2FOSE.js";import"./chunk-RCQMEJEP.js";import"./chunk-WTBIP24L.js";import"./chunk-HWYDZOOB.js";import"./chunk-SKYCSHSI.js";import"./chunk-TCSX4HQQ.js";import"./chunk-6H3Y45OD.js";import"./chunk-KALOGAGR.js";import"./chunk-E5Q7T5U3.js";import"./chunk-2MI33D23.js";import"./chunk-L5H2YOJD.js";import"./chunk-GOUDWO5Q.js";import{a as Ct}from"./chunk-RYAOEO24.js";import"./chunk-LINATLLG.js";import"./chunk-AUKWYF5J.js";import"./chunk-Q4S2WO7F.js";import"./chunk-WLGBPOGB.js";import"./chunk-YHUQOYS5.js";import{a as b,c as dt,d as H,e as Z,f as O,h as xt,i as M,j as P,k as gt,p as $,q as J,r as _t,s as yt,t as Lt}from"./chunk-GTFDNLQR.js";import{b as ht}from"./chunk-2I6K6QBF.js";import"./chunk-Z3AVDJYR.js";import"./chunk-DYCW5JBN.js";import"./chunk-473YHDZJ.js";import"./chunk-CKRUHP35.js";import"./chunk-P6N6KWSS.js";import"./chunk-U65S63W6.js";import"./chunk-DKAHQZW7.js";import"./chunk-OB7EIG6I.js";import"./chunk-CBYWE4ZS.js";import"./chunk-YNP5EQNA.js";import"./chunk-TGTCJHHS.js";import"./chunk-PQ3PMTLX.js";import"./chunk-AHWM6USP.js";import"./chunk-DFIMOBBJ.js";import"./chunk-RD5QD7MH.js";import"./chunk-6IJDRLPZ.js";import"./chunk-PO23PKFU.js";import"./chunk-HVTJXLNW.js";import"./chunk-ESXBSF3B.js";import"./chunk-PNY3TA7V.js";import"./chunk-4AVGLJGA.js";import"./chunk-TQ3GWPOH.js";import"./chunk-PYZXP3W4.js";import"./chunk-QDNQKTGP.js";import"./chunk-3QF6VHEM.js";import"./chunk-BDM2VHZE.js";import"./chunk-64SQYTOJ.js";import"./chunk-FYP53U2P.js";import"./chunk-Z4OLA6VU.js";import"./chunk-5O3SURTC.js";import"./chunk-NMBDO6HS.js";import"./chunk-55MCSU6E.js";import"./chunk-OPNT5XFL.js";import"./chunk-MDLQ46WE.js";import{a as Tt}from"./chunk-FQEN5BEF.js";import"./chunk-KRXFQR7K.js";import"./chunk-CE23KTLV.js";import"./chunk-ZL32ASCM.js";import"./chunk-3TUBCZ6Z.js";import"./chunk-5RWJB7PM.js";import"./chunk-UOK5DCVS.js";import"./chunk-O4AMPUEN.js";import{q as T}from"./chunk-AACZ2HW4.js";import"./chunk-M2U4YLEL.js";import{f as pt}from"./chunk-ZBGU2467.js";import{o as Q}from"./chunk-DD3BDKUM.js";import{bc as v,ga as ut}from"./chunk-TYUTKD3A.js";import"./chunk-ENPA2E7U.js";import{a as C}from"./chunk-WOHVJ5VI.js";import"./chunk-HXEPH4TB.js";import{a as Yt}from"./chunk-F7IOPQEO.js";import"./chunk-QBSBGD35.js";import"./chunk-GFKCYZVW.js";import"./chunk-CHLBHCPL.js";import{_ as ft,da as Kt}from"./chunk-NC7RXVWZ.js";import"./chunk-DM24NLHH.js";import"./chunk-PTVNLPKV.js";import"./chunk-JFKXAMRK.js";import"./chunk-V2SICOMY.js";import"./chunk-Z6Y7MSRE.js";import{c as p}from"./chunk-FVQK2MNN.js";import"./chunk-5Z5B37ND.js";import"./chunk-QWQGBYOY.js";import"./chunk-BUAMOL6H.js";import{A as q,C as mt,o as at,w as ct}from"./chunk-PLHFXPVU.js";import"./chunk-5BQQ5BTM.js";import{N as R,w as g}from"./chunk-4IQZG47E.js";import"./chunk-BKLQOL2X.js";import"./chunk-AJ3QZWYK.js";import"./chunk-4USCG7JU.js";import"./chunk-4LMFCZAJ.js";import"./chunk-GBWBODBO.js";import{H as Gt,T as nt}from"./chunk-X62Q7VCJ.js";import"./chunk-X7RY3AWM.js";import{a as y}from"./chunk-WQYVBC56.js";import"./chunk-MX777P4Z.js";import"./chunk-GW6IXZ75.js";import"./chunk-LSOIOGAP.js";import"./chunk-54ZU3WOZ.js";import"./chunk-E4IUBLG2.js";import"./chunk-GMY3CGN4.js";import"./chunk-J52BXABX.js";import"./chunk-FBMAZNAP.js";import"./chunk-H3AZE3V6.js";import"./chunk-7PMBWAQJ.js";import"./chunk-Z37CYTXG.js";import"./chunk-ADNFNM5R.js";import"./chunk-ZP73ZDSP.js";import"./chunk-W3TSI3ZZ.js";import"./chunk-JSF2EI74.js";import"./chunk-56JXL4SQ.js";import"./chunk-METSMHFB.js";import{f as l,m as e,o}from"./chunk-CS4SUKWE.js";e();o();var r=l(y()),W=l(v()),vt=l(Yt()),At=l(Q());R();Kt();e();o();var D=l(y()),z=l(v());e();o();var V=l(y());R();e();o();var A={root:"_root_tcl1w_1",filter:"_filter_tcl1w_13"};e();o();var _=l(y());var bt=l(Gt());R();var It=l(Q());var qt={tooltip:"wallet_extension_history_tooltip_autoblocked_risky"},kt="hasReadTxHistoryFilterEntryTooltip",Zt=()=>{try{return localStorage.getItem(kt)??!1}catch{return!0}},$t=()=>{try{localStorage.setItem(kt,!0)}catch(s){console.error(s)}};function Jt({onClick:s}){let t=(0,_.useRef)();(0,_.useEffect)(()=>{Zt()||(t.current.setVisible(!0),$t())},[]);let n=a=>{t.current=a},i=(0,_.useRef)();return(0,It.useClickAway)(()=>{t.current.setVisible(!1)},i),_.default.createElement(q,{popupRef:n,placement:q.DIRECTION.bottomRight,title:g(qt.tooltip)},_.default.createElement(p.Box,{ref:i},_.default.createElement(nt,{onClick:s,className:(0,bt.default)("okds-filter",A.filter)})))}var Vt=Jt;e();o();var S=l(y());R();e();o();var I={root:"_root_skuda_1",textBox:"_textBox_skuda_7",text:"_text_skuda_7"};e();o();var U=l(y());function Qt({onChange:s,reject:t}){let[n,i]=(0,U.useState)(t);return(0,U.useEffect)(()=>{i(t)},[t]),{currentReject:n,onChangeReject:h=>u=>{let m=t,d={...m,[h]:u};i(d),dt(h,u).then(x=>{x?(i(d),s?.(d)):i(m)}).catch(()=>{i(m)})}}}var Ft=Qt;var Et={hideValuelessNftTittle:"wallet_extension_history_toggle_block_risky",hideValuelessNftSubtitle:"wallet_extension_history_toggle_risky_invalid_only"},Xt=s=>{let{currentReject:t,onChangeReject:n}=Ft(s);return S.default.createElement(p.Box,{className:I.root},S.default.createElement(p.Box,{className:I.textBox},S.default.createElement(T.Text,{warp:!0,strong:!0,size:T.SIZE.md,className:I.text},g(Et.hideValuelessNftTittle)),S.default.createElement(T.Text,{warp:!0,size:T.SIZE.xs,className:I.text,type:T.TYPE.secondary},g(Et.hideValuelessNftSubtitle))),S.default.createElement(mt,{onChange:n(b.hideValuelessNft),checked:t?.[b.hideValuelessNft]}))},jt=Xt;e();o();var k=l(y()),Rt=l(v());function te(){let s=(0,Rt.useDispatch)(),[t,n]=(0,k.useState)({[b.hideValuelessNft]:!1}),[i,a]=(0,k.useState)(!1),h=()=>H().then(x=>{n(x)}).catch(()=>{});(0,k.useEffect)(()=>{h()},[]);let u=()=>{a(!0)},m=()=>{a(!1)};return{reject:t,onChangeShowValueLess:x=>{n(x),s(O({})),setTimeout(()=>{m()},200)},openDialog:u,closeDialog:m,showRejectDialog:i}}var Ht=te;function ee(){let{reject:s,onChangeShowValueLess:t,openDialog:n,closeDialog:i,showRejectDialog:a}=Ht();return V.default.createElement(p.Box,{className:A.root},V.default.createElement(Vt,{onClick:n}),V.default.createElement(at,{title:g("wallet_extension_history_title_filter"),visible:a,onClose:i,onCancel:i,alignBottom:!0,noMargin:!0},V.default.createElement(jt,{onChange:t,reject:s})))}var Ot=ee;e();o();var tt={"retina-border-basic":"_retina-border-basic_12hb5_1",retinaBorderBasic:"_retina-border-basic_12hb5_1",root:"_root_12hb5_29",left:"_left_12hb5_68"};function oe(){let s=(0,z.useDispatch)(),t=(0,z.useSelector)(M);return D.default.createElement(St,{align:ct.DIRECTION.left,value:t.mainCoinId,searchable:!0,onChange:n=>{s(O({mainCoinId:n}))}})}function re(){return D.default.createElement(p.Box,{className:tt.root},D.default.createElement(p.Box,{className:tt.left},D.default.createElement(oe,null)),D.default.createElement(Ot,null))}var Mt=re;e();o();var c=l(y()),L=l(v()),N=l(Q());var se=({txData:s,setTxData:t,explorerUrl:n,hasMoreData:i=!1,hasInitData:a})=>{let h=(0,L.useDispatch)(),u=(0,L.useSelector)(M),m=(0,L.useSelector)(xt),d=(0,L.useSelector)(pt),x=(0,L.useSelector)(gt),F=(0,L.useSelector)(P),[E,G]=(0,c.useState)(null),{run:w}=(0,N.useDebounceFn)(()=>{h(Z({...F}))},{wait:200}),K=(0,c.useCallback)(()=>{h(Z({...F},{scrollLoad:!0,hasMoreData:i,hasInitData:a}))},[u,i,a]);Bt({scrollContainer:E},w),(0,N.useInfiniteScroll)(K,{target:E,threshold:150});let[j,Y]=(0,c.useMemo)(()=>Dt(m,d),[m,d]),et=(0,N.useMemoizedFn)(()=>{t(null)});return c.default.createElement(c.default.Fragment,null,c.default.createElement(wt.HistoryList,{completedList:Y,pendingList:j,isLoading:x,onClick:t,onRepeat:w,onContainer:G,explorerUrl:n}),c.default.createElement(Nt,{visible:!!s,params:s,onRefresh:w,onClose:et}))},Pt=(0,c.memo)(se);e();o();var ie=()=>{let s=(0,vt.useHistory)(),t=(0,W.useDispatch)(),n=(0,W.useSelector)(P),i=ht()?.stringDates?.[0],[a,h]=(0,r.useState)(!0),[u,m]=(0,r.useState)(null),d=(0,At.useLatest)(u),[x,F]=(0,r.useState)([]),[E,G]=(0,r.useState)(!1),[w,K]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let Ut=[(async()=>{let B=await H()??{};return await ut({startDate:new Date(`${i} 00:00:00`).getTime(),...n,hideValuelessNft:B?.hideValuelessNft??!0,status:[C.PENDING,C.CONFIRMING,C.ERROR,C.SUCCESS,C.WITHDRAWING]})})()];Promise.all(Ut).then(([B])=>{let ot=(st,it)=>{let lt=st.length,Wt=it?st[lt-1]?.rowId:"";t(yt(Wt)),t(J(!1)),G(it),K(lt>0)},rt=B.content||[],zt=B.hasViewMore;t($(rt)),F(B?.explorerUrl||[]),ot(rt,zt)}).catch(()=>{t($([])),t(J(!1))}).finally(()=>{h(!1)})},[]);let j=()=>{s.goBack(),t(Lt()),t(_t()),t(ft())},Y=(0,r.useCallback)(()=>{d.current?m(null):j()},[u]);return r.default.createElement(X.PageContainer,{className:"tx-history__container"},r.default.createElement(Tt,{sticky:!1,className:"tx-history__navigator",title:g("wallet_extension_header_text_history"),onBack:j,closeable:!1,bordered:!1,customizeBackFn:Y}),a?r.default.createElement(Ct,null):r.default.createElement(r.default.Fragment,null,r.default.createElement(X.FilterContainer,null,r.default.createElement(Mt,null)),r.default.createElement(Pt,{txData:u,setTxData:m,explorerUrl:x,hasMoreData:E,hasInitData:w})))},zo=(0,r.memo)(ie);export{zo as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=WalletHistory-H4RUG4JU.js.map
