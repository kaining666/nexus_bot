import{a as gt}from"./chunk-GALOTWRD.js";import{a as it}from"./chunk-34MYT4YR.js";import{a as _t}from"./chunk-473YHDZJ.js";import{f as st}from"./chunk-U65S63W6.js";import{B as ft}from"./chunk-AHWM6USP.js";import{a as ct}from"./chunk-PO23PKFU.js";import{a as nt}from"./chunk-HVTJXLNW.js";import{a as wt}from"./chunk-64SQYTOJ.js";import{a as lt,d as ut,f as dt}from"./chunk-EBMLJPB4.js";import{b as Z}from"./chunk-OHGMAD4C.js";import{k as V}from"./chunk-KRXFQR7K.js";import{a as at}from"./chunk-CE23KTLV.js";import{b as pt,c as mt}from"./chunk-ZL32ASCM.js";import{a as S,x as J,y as X}from"./chunk-UOK5DCVS.js";import{q as m}from"./chunk-AACZ2HW4.js";import{o as Lt}from"./chunk-DD3BDKUM.js";import{Db as tt,bc as Ct,hb as $,kb as j,nb as Q}from"./chunk-TYUTKD3A.js";import{a as et}from"./chunk-HXEPH4TB.js";import{a as ot}from"./chunk-F7IOPQEO.js";import{wa as K,xa as G,ya as Ut}from"./chunk-NC7RXVWZ.js";import{g as rt}from"./chunk-JFKXAMRK.js";import{ic as R,n as H,oc as Nt,y as St}from"./chunk-QWQGBYOY.js";import{D as x,H as q,g as I,o as Y,q as D}from"./chunk-PLHFXPVU.js";import{N as A,w as s,x as z}from"./chunk-4IQZG47E.js";import{H as Pt,ca as y}from"./chunk-X62Q7VCJ.js";import{a as F}from"./chunk-WQYVBC56.js";import{f as _,m as o,o as e}from"./chunk-CS4SUKWE.js";o();e();var t=_(F()),kt=_(ot());var P=_(Pt());A();o();e();o();e();var h=_(F()),k=_(Ct()),ht=_(ot()),N=_(Lt());A();o();e();var yt=()=>nt("passwordSecurity",{...it,location:window.location.href})?.data;Nt();o();e();var xt=r=>{let n="";try{let a=j(r),u=$(r),i=tt(r);n=st(r)?.metadata?.origin||u[u.length-1]?.origin||u[u.length-1]?.msgParams?.origin||i[i.length-1]?.origin||a[a.length-1]?.origin}catch{}return n};St();Ut();o();e();var w=_(F());A();o();e();var T={updateMb32:"_updateMb32_2kuwm_1",centerImage:"_centerImage_2kuwm_4",titleUpdate:"_titleUpdate_2kuwm_11",textUpdate:"_textUpdate_2kuwm_16"};var Tt=(r,n)=>{Y.action({mobileWidth:"77.777777%",noTopRadius:!1,alignBottom:!1,hideCloseBtn:!0,btnFull:!0,children:w.default.createElement("div",{className:T.updateMb32},w.default.createElement("div",{className:T.centerImage},w.default.createElement("img",{src:n,alt:"updatePassword"})),w.default.createElement("div",{className:T.titleUpdate},s("wallet_extension_password_popup_title_wallet_security_tip")),w.default.createElement("div",{className:T.textUpdate},s("wallet_extension_password_popup_text_wallet_security_tip"))),confirmText:s("wallet_extension_password_popup_btn_update_password"),cancelText:s("wallet_extension_password_popup_btn_maybe_later"),maskClosable:!1,onConfirm:a=>{window.localStorage.pss=1,r.push(X),a.destroy()},cancelBtnProps:{category:"text",type:"primary"},onCancel:a=>{window.localStorage.pss=1,a.destroy()}})};var vt=r=>`https://${r}/help/how-to-solve-the-problem-of-encountering-password-errors-when-logging-in-to`,O=()=>(0,k.useSelector)(Q),M=({form:r})=>{let n=(0,ht.useHistory)(),a=(0,k.useDispatch)(),u=wt(),[i,g]=(0,h.useState)(!1),[c,p]=(0,h.useState)(null),[{walletAsset:U=0}]=ft(),C=yt(),E=(0,k.useSelector)(xt),W=R()===H;(0,N.useMount)(()=>{Z({islogin:"no",isbydapp:W?" yes":"no",dapp_url:E,wallet_id:u})});let L=_t(),Et=ct()?.passwordNotice||vt(L),bt=rt({dark:"/cdn/assets/imgs/246/74D87A474619BCFE.png",light:"/cdn/assets/imgs/246/696DAB049D0A9095.png"}),It=(0,N.useMemoizedFn)(async B=>{let v=r.getFieldValue("password");if(v&&!i&&!c)try{let b=window.localStorage.pss;g(!0),await a(V(v)),C&&v.length<gt&&Number(U)>100&&!b&&Tt(n,bt),n.push(S)}catch({message:b}){b===K?p(z("wallet_set_password_errortip_password_wrong_see_notice",{notice:h.default.createElement(I,{size:I.SIZE.sm,weight:I.WEIGHT.muted,target:"_blank",href:Et,underline:!0},s("wallet_set_password_errortip_password_wrong_see_notice_icu"))})):b===G&&q.error(s("wallet_home_toast_version_error")),B&&B()}finally{g(!1)}},[r,i,c]);return{submitting:i,passwordError:c,setPasswordError:p,onSubmit:It}};o();e();var l={password:"_password_11p2x_1",error:"_error_11p2x_5",input:"_input_11p2x_8",btn:"_btn_11p2x_14",footer:"_footer_11p2x_17","tip-text":"_tip-text_11p2x_21",tipText:"_tip-text_11p2x_21","password-tip-text":"_password-tip-text_11p2x_31",passwordTipText:"_password-tip-text_11p2x_31","pass-key-tip-text":"_pass-key-tip-text_11p2x_34",passKeyTipText:"_pass-key-tip-text_11p2x_34"};var Ft=()=>{let r=x.useForm(),n=O(),a=(0,kt.useHistory)();t.default.useLayoutEffect(()=>{n&&a.push(S)},[n]);let{submitting:u,passwordError:i,setPasswordError:g,onSubmit:c}=M({form:r}),p=(0,t.useRef)(null),[U]=mt(pt.passwordType),{open:C}=ut(),E=(0,t.useCallback)(async d=>{(d?.key==="Enter"||d?.keyCode===13)&&await c(()=>{p.current&&setTimeout(()=>{p.current.focus()})})},[]);return(0,t.useEffect)(()=>(document.addEventListener("keydown",E),()=>{document.removeEventListener("keydown",E)}),[]),U===2?t.default.createElement(t.default.Fragment,null,t.default.createElement(dt,{onPass:async d=>{r.setFieldsValue({password:d}),await c()}}),t.default.createElement(m.Text,{className:(0,P.default)(l.tipText,l.passKeyTipText),strong:!0,align:m.ALIGN.center,size:m.SIZE.sm,type:m.TYPE.secondary,onClick:()=>{C()}},s("wallet_extension_biometrics_dialog_title_cant_unlock"))):t.default.createElement(x,{form:r,onChange:()=>{g(null)},onSubmit:async()=>{await c(()=>{p.current&&setTimeout(()=>{p.current.focus()})})}},t.default.createElement(x.Item,{useChildError:!0,name:"password",className:l.password,extra:!!i&&t.default.createElement(m.Text,{size:m.SIZE.sm,className:l.error},i)},t.default.createElement(lt,{elementName:"u",autoFocus:"autoFocus",inputClassName:l.input,className:(0,P.default)({error:!!i}),size:D.SIZE.xl,autoComplete:"off",errorType:D.TIP_TYPE.always,disabled:u,placeholder:s("wallet_home_lock_wallet_placeholder_input_password"),onRef:d=>{p.current=d}})),t.default.createElement(x.Item,{shouldUpdate:!0,className:l.btn},({getFieldValue:d})=>{let L=!d("password")||!!i;return t.default.createElement(at,{usePortal:!0,placeholder:!0,offsetBottom:0,className:l.footer,style:{zIndex:1e4}},t.default.createElement(y,{block:!0,htmlType:"submit",disabled:L,category:y.CATEGORY.fill,type:y.TYPE.highlight,size:y.SIZE.xl,loading:u,loadingText:s("wallet_home_btn_unlock"),onClick:async()=>{await c(()=>{p.current&&setTimeout(()=>{p.current.focus()})})}},s("wallet_home_btn_unlock")),t.default.createElement(et,{to:J,className:(0,P.default)(l.tipText,l.passwordTipText)},t.default.createElement(m.Text,{strong:!0,size:m.SIZE.sm,type:m.TYPE.secondary},s("wallet_footer_subtitle_forgot_password"))))}))};o();e();export{xt as a,M as b,Ft as c};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-QAOEZZ24.js.map
