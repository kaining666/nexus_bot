import{a as He}from"./chunk-4O2BTSB2.js";import{a as We}from"./chunk-NMN2AWWK.js";import{a as Je}from"./chunk-OI3E7YYC.js";import"./chunk-YPBYJ2GM.js";import"./chunk-JE4TKT66.js";import{a as Ge}from"./chunk-TMNGU7XK.js";import{b as Ze}from"./chunk-CANIX4MR.js";import{a as Ke,b as M}from"./chunk-CP7D2K6Q.js";import{a as Me}from"./chunk-5QC4KJF3.js";import"./chunk-V2FMJ6CW.js";import{a as Ue}from"./chunk-6AMXLP7C.js";import{a as te,b as Oe}from"./chunk-M7EHI3O6.js";import{a as Ve}from"./chunk-BW7FGUVV.js";import{a as Fe}from"./chunk-AHVS5ZUQ.js";import{a as oe}from"./chunk-SRLJJNIQ.js";import{a as Pe}from"./chunk-NMI5SIQF.js";import"./chunk-IYJ2R4Y5.js";import"./chunk-FPLAPREM.js";import"./chunk-4JNVSGED.js";import"./chunk-L7FDIAMD.js";import"./chunk-77F6B6US.js";import"./chunk-LLMO6UHT.js";import"./chunk-TGE2FOSE.js";import{m as Be}from"./chunk-6H3Y45OD.js";import"./chunk-KALOGAGR.js";import"./chunk-WLGBPOGB.js";import"./chunk-Z3AVDJYR.js";import"./chunk-DYCW5JBN.js";import"./chunk-U65S63W6.js";import"./chunk-OB7EIG6I.js";import"./chunk-CBYWE4ZS.js";import"./chunk-TGTCJHHS.js";import"./chunk-AHWM6USP.js";import"./chunk-DFIMOBBJ.js";import"./chunk-RD5QD7MH.js";import"./chunk-6IJDRLPZ.js";import"./chunk-ESXBSF3B.js";import"./chunk-4AVGLJGA.js";import"./chunk-TQ3GWPOH.js";import"./chunk-PYZXP3W4.js";import"./chunk-QDNQKTGP.js";import"./chunk-3QF6VHEM.js";import"./chunk-BDM2VHZE.js";import{h as Q,i as X}from"./chunk-64SQYTOJ.js";import"./chunk-FYP53U2P.js";import"./chunk-Z4OLA6VU.js";import"./chunk-5O3SURTC.js";import"./chunk-NMBDO6HS.js";import"./chunk-55MCSU6E.js";import{a as $e,b as G}from"./chunk-OPNT5XFL.js";import{a as ee}from"./chunk-FQEN5BEF.js";import"./chunk-KRXFQR7K.js";import"./chunk-CE23KTLV.js";import"./chunk-ZL32ASCM.js";import"./chunk-3TUBCZ6Z.js";import"./chunk-5RWJB7PM.js";import{X as z,f as V,ka as F,w as W}from"./chunk-UOK5DCVS.js";import"./chunk-O4AMPUEN.js";import{l as Le,m as we}from"./chunk-AACZ2HW4.js";import"./chunk-M2U4YLEL.js";import"./chunk-ZBGU2467.js";import{o as pt}from"./chunk-DD3BDKUM.js";import{bc as Ee,m as ve,s as j,t as q,ta as Ae,v as Ne,xb as be,zb as xe}from"./chunk-TYUTKD3A.js";import"./chunk-ENPA2E7U.js";import"./chunk-WOHVJ5VI.js";import"./chunk-HXEPH4TB.js";import{a as ge}from"./chunk-F7IOPQEO.js";import{e as Y,k as fe}from"./chunk-GFKCYZVW.js";import"./chunk-CHLBHCPL.js";import"./chunk-NC7RXVWZ.js";import"./chunk-DM24NLHH.js";import"./chunk-PTVNLPKV.js";import"./chunk-JFKXAMRK.js";import{f as ke}from"./chunk-V2SICOMY.js";import"./chunk-Z6Y7MSRE.js";import{c as De}from"./chunk-FVQK2MNN.js";import"./chunk-5Z5B37ND.js";import{Nb as _e,Ra as he,X as Z,Xa as pe,fc as at,sc as Ie,vc as Te,xa as ye,xc as dt}from"./chunk-QWQGBYOY.js";import"./chunk-BUAMOL6H.js";import{A as ue,E as R,o as J,y as H}from"./chunk-PLHFXPVU.js";import"./chunk-5BQQ5BTM.js";import{N as O,w as a}from"./chunk-4IQZG47E.js";import"./chunk-AJ3QZWYK.js";import"./chunk-4USCG7JU.js";import"./chunk-4LMFCZAJ.js";import"./chunk-GBWBODBO.js";import{H as ct,T as Ce,ca as Se}from"./chunk-X62Q7VCJ.js";import"./chunk-X7RY3AWM.js";import{a as P}from"./chunk-WQYVBC56.js";import"./chunk-MX777P4Z.js";import"./chunk-GW6IXZ75.js";import"./chunk-LSOIOGAP.js";import"./chunk-54ZU3WOZ.js";import"./chunk-E4IUBLG2.js";import"./chunk-GMY3CGN4.js";import"./chunk-FBMAZNAP.js";import"./chunk-H3AZE3V6.js";import"./chunk-7PMBWAQJ.js";import"./chunk-Z37CYTXG.js";import"./chunk-ADNFNM5R.js";import"./chunk-ZP73ZDSP.js";import"./chunk-W3TSI3ZZ.js";import"./chunk-JSF2EI74.js";import"./chunk-56JXL4SQ.js";import"./chunk-METSMHFB.js";import{f as E,m as r,o as s}from"./chunk-CS4SUKWE.js";r();s();var st=E(P());r();s();var y=E(P()),Ye=E(ge());O();at();r();s();function _t(){let t=Je(),l=He(),o=Pe();return async i=>{let m=await t(i),c=await l({coinId:i.coinId}),f=await o({coinId:i.coinId});return!m||!c||!f?Promise.reject():Promise.resolve()}}var ie=_t;r();s();var n=E(P()),ze=E(ct());O();pe();r();s();var Re=E(ge());var ut=(t,l)=>{let o=(0,Re.useHistory)(),{address:i}=Me();return m=>{let c={from:t[m.addressType]};i&&(c.address=i);let f=G(c),N=G({coinId:m.coinId,addressType:m.addressType}),h=l==="send"?`${V}/${m.coinId}${F}${f}`:`${W}${N}`;o.push(h)}},re=ut;r();s();O();dt();var je=E(Ee()),ft=t=>{let l=(0,je.useSelector)(xe);return o=>{let i=Te[o.addressType],m=ve(t[i]),c=a(Ie[i]),f=we(o.coinAmount),N=Le(o.currencyAmount,{useApproximate:!1,symbol:l.symbol});return{addressDisplay:m,addressTypeDisplay:c,amountDisplay:f,currencyAmountDisplay:N}}},se=ft;r();s();var u={container:"_container_dxmc1_1","setting-nav":"_setting-nav_dxmc1_6",settingNav:"_setting-nav_dxmc1_6",body:"_body_dxmc1_9",item:"_item_dxmc1_12","item-left":"_item-left_dxmc1_23",itemLeft:"_item-left_dxmc1_23","item-right":"_item-right_dxmc1_26",itemRight:"_item-right_dxmc1_26","item-right-top":"_item-right-top_dxmc1_29",itemRightTop:"_item-right-top_dxmc1_29","item-right-bottom":"_item-right-bottom_dxmc1_34",itemRightBottom:"_item-right-bottom_dxmc1_34","item-icon":"_item-icon_dxmc1_39",itemIcon:"_item-icon_dxmc1_39","item-address":"_item-address_dxmc1_43",itemAddress:"_item-address_dxmc1_43","item-address-type":"_item-address-type_dxmc1_50",itemAddressType:"_item-address-type_dxmc1_50","item-currency-amount":"_item-currency-amount_dxmc1_62",itemCurrencyAmount:"_item-currency-amount_dxmc1_62","item-amount":"_item-amount_dxmc1_73",itemAmount:"_item-amount_dxmc1_73",infoIcon:"_infoIcon_dxmc1_84",title:"_title_dxmc1_89",tip:"_tip_dxmc1_97",subTitle:"_subTitle_dxmc1_98"};var qe="SelectBTCAddress_has_opened_tip_on_dlg",gt=({visible:t,onClose:l,coin:o,type:i})=>{let m=localStorage.getItem(qe),c=Q(Z),[f,N]=(0,n.useState)(!m),h=Ue(o),C=i==="send"?h.filter(d=>d.coinAmount>0):h,S=se(c),A=re(c,i),b=()=>{N(!1),localStorage.setItem(qe,!0)},I=()=>i==="send"?a("extension_defi_top_tooltips_only_usage_utxo_value_icu",{chainName:o?.chainName}):a("extension_defi_top_tooltips_only_usage_utxo_icu",{chainName:o?.chainName}),L=n.default.createElement(n.default.Fragment,null,a("extension_defi_top_header_title_select_address_type"),n.default.createElement(ue,{width:310,placement:ue.DIRECTION.bottomRight,title:I()},n.default.createElement(Ce,{"data-testid":"top-header-info-icon",className:(0,ze.default)("okds-information-circle",u.infoIcon)})));return n.default.createElement(n.default.Fragment,null,n.default.createElement(J.Action,{isFull:!0,title:L,onClose:l,visible:t,noContentPadding:!0},n.default.createElement("div",{className:u.container},n.default.createElement("div",{className:u.body},n.default.createElement("div",{className:u.list},C.map(d=>{let{addressDisplay:k,addressTypeDisplay:$,amountDisplay:e,currencyAmountDisplay:v}=S(d);return n.default.createElement("div",{"data-testid":"select-btc-address-item",className:u.item,onClick:()=>{A(d)}},n.default.createElement("div",{className:u.itemLeft},n.default.createElement(R,{width:32,height:32,alt:$,src:d.image,errorImg:Y,className:u.itemIcon})),n.default.createElement("div",{className:u.itemRight},n.default.createElement("div",{className:u.itemRightBottom},n.default.createElement("div",{className:u.itemAddressType},$),n.default.createElement("div",{className:u.itemAmount},e)),n.default.createElement("div",{className:u.itemRightTop},n.default.createElement("div",{className:u.itemAddress},k),n.default.createElement("div",{className:u.itemCurrencyAmount},v))))}))))),n.default.createElement(J.Confirmation,{visible:t&&f,confirmText:a("wallet_extension_btn_general_gotit"),onConfirm:b,onClose:b,confirmBtnProps:{size:Se.SIZE.lg}},n.default.createElement("div",{className:u.container},n.default.createElement("div",{className:u.title},a("extension_defi_popup_title_btc_address_type_icu",{chainName:o?.chainName})),n.default.createElement("div",{className:u.tip},a("extension_defi_popup_desc_btc_address_type_icu",{chainName:o?.chainName})))))},ne=gt;r();s();var K=E(P());O();function yt({list:t,pageType:l,isVirtualList:o,onSearch:i,renderEmpty:m,getItemProps:c,loading:f,loadingMore:N,...h},C){let{currentNetworkUniqueId:S}=oe(),A=(0,K.useMemo)(()=>{let I=t.map(d=>({...d,symbolName:d.symbol}));return Be(I,S,l==="send")},[S,t]),b=I=>{let L,{baseCoinId:d,childrenCoin:k,tokenType:$,aggregation:e}=I;if(l==="send"){let x=(k||[]).filter(_=>_.currencyAmount>0);e&&x.length>1?L=a("wallet_manage_crypto_labels_crypto_multichain"):L=d===0?"":$}else L=e?a("wallet_manage_crypto_labels_crypto_multichain"):$;let v=c?c(I):{};return{name:I.name,tag:L,...v}};return K.default.createElement(Ke,{headerProps:{closeable:!1,title:a("wallet_transfer_send_select_coin_maintitle_select_coin")},...h,searchPlaceholder:a("wallet_transfer_send_select_coin_placeholder_input_name"),list:A,onSearch:i,getItemProps:b,renderEmpty:m,isVirtualList:o,loadingMore:N,loading:f,ref:C})}var me=(0,K.forwardRef)(yt);r();s();var g=E(P());O();r();s();var D={container:"_container_onsr7_1",body:"_body_onsr7_6",item:"_item_onsr7_9","item-left":"_item-left_onsr7_20",itemLeft:"_item-left_onsr7_20","item-right":"_item-right_onsr7_23",itemRight:"_item-right_onsr7_23","item-right-top":"_item-right-top_onsr7_26",itemRightTop:"_item-right-top_onsr7_26","item-right-bottom":"_item-right-bottom_onsr7_31",itemRightBottom:"_item-right-bottom_onsr7_31","item-icon":"_item-icon_onsr7_36",itemIcon:"_item-icon_onsr7_36","item-address":"_item-address_onsr7_40",itemAddress:"_item-address_onsr7_40","item-address-type":"_item-address-type_onsr7_47",itemAddressType:"_item-address-type_onsr7_47","item-currency-amount":"_item-currency-amount_onsr7_59",itemCurrencyAmount:"_item-currency-amount_onsr7_59","item-amount":"_item-amount_onsr7_70",itemAmount:"_item-amount_onsr7_70"};var ht=({visible:t,onClose:l,coin:o,type:i})=>{let m=X(),c=We(o),f=i==="send"?c.filter(C=>C.coinAmount>0):c,N=se(m),h=re(m,i);return g.default.createElement("div",null,g.default.createElement(J.Action,{noTopRadius:!0,alignBottom:!0,hideCloseBtn:!0,animateDisable:!0,noContentPadding:!0,onClose:l,visible:t,windowStyle:{width:"100%",height:"100%",maxHeight:"100%",overflow:"hidden"}},g.default.createElement("div",{className:D.container},g.default.createElement(ee,{className:"setting-nav",title:a("extension_defi_top_header_title_select_address_type"),onBack:l,closeable:!1}),g.default.createElement("div",{className:D.body},g.default.createElement("div",{className:D.list},f.map(C=>{let{addressDisplay:S,addressTypeDisplay:A,amountDisplay:b,currencyAmountDisplay:I}=N(C);return g.default.createElement("div",{className:D.item,onClick:()=>{h(C)}},g.default.createElement("div",{className:D.itemLeft},g.default.createElement(R,{width:32,height:32,alt:A,src:C.image,errorImg:Y,className:D.itemIcon})),g.default.createElement("div",{className:D.itemRight},g.default.createElement("div",{className:D.itemRightBottom},g.default.createElement("div",{className:D.itemAddressType},A),g.default.createElement("div",{className:D.itemAmount},b)),g.default.createElement("div",{className:D.itemRightTop},g.default.createElement("div",{className:D.itemAddress},S),g.default.createElement("div",{className:D.itemCurrencyAmount},I))))}))))))},le=ht;r();s();var ae={empty:"_empty_68vmq_1",emptyResult:"_emptyResult_68vmq_5"};function Ct(){let t=(0,Ye.useHistory)(),l=M(),{address:o,coinIds:i}=$e(t?.location.search.slice(1)),m=te(),c=(0,y.useMemo)(()=>(m||[]).filter(e=>{let v=x=>{if(i){let _=i.split(",").map(T=>Number(T));return _.includes(x.coinId)||_.includes(x.baseCoinId)}return!0};return _e(e.coinAmount,0)&&v(e)}),[m,i]),f=ie(),[N,h]=(0,y.useState)(!1),[C,S]=(0,y.useState)(!1),[A,b]=(0,y.useState)(null),I=Q(),L=X(),d=(e,v)=>{let x=e.childrenCoin.filter(_=>_.coinId===e.coinId&&_e(_.coinAmount,0));if(x.length===1){let T=`?from=${v[x[0].addressType]}`;o&&(T+=`&address=${o}`),t.push({pathname:`${V}/${e.coinId}${F}`,search:T})}return null},k=async e=>{if(j(e)){d(e,I),b(e),h(!0);return}if(q(e)){d(e,L),b(e),S(!0);return}await f(e);let v,x,T=(e.childrenCoin||[]).filter(p=>p.currencyAmount>0);T.length>1&&e.aggregation?(v=z,x=`coinKey=${encodeURIComponent(e.key)}&aggregationSymbol=${e.symbol}&type=${l}`):T.length===1&&e.aggregation?v=`${V}/${T[0].coinId}${F}`:v=`${V}/${e.coinId}${F}`,o&&(x?x+=`&address=${o}`:x=`address=${o}`),t.push({pathname:v,search:x})};return c.length===0?y.default.createElement(De.Container,null,y.default.createElement(ee,{closeable:!1,title:a("wallet_transfer_send_select_coin_maintitle_select_coin")}),y.default.createElement(H.State,{className:ae.empty,title:a("wallet_transfer_maintitle_not_any_token")})):y.default.createElement(y.default.Fragment,null,y.default.createElement(me,{list:c,renderEmpty:e=>y.default.createElement(H.State,{className:ae.emptyResult,title:a("wallet_extension_send_toast_unfoundcrypto",{crypto:y.default.createElement("span",{className:ae.emptyText},e)})}),onClick:k,pageType:"send",isVirtualList:!1}),y.default.createElement(ne,{visible:N,onClose:()=>{h(!1)},coin:A,type:"send"}),y.default.createElement(le,{visible:C,onClose:()=>{S(!1)},coin:A,type:"send"}))}var Qe=Ct;r();s();var B=E(P()),ot=E(Ee()),it=E(ge());O();r();s();var Xe=E(P()),U=E(pt());pe();function et(){let[t,l]=(0,Xe.useState)(""),o=!!t,i=te(),m=Oe(),c=(0,U.useCreation)(()=>Array.from(new Set(Ge(o?m:i).map(d=>d.coinId))),[i,m,o]),f=Ve(),N=(0,U.useMemoizedFn)(d=>{l(d)}),h=(0,U.useDebounce)(t,{wait:500}),C=Fe(),{data:S,loading:A,loadingMore:b,listRef:I}=Ze({aggregation:!0,symbolLike:h,chainIds:C!==""?[Number(C)]:void 0,excludeCoinIds:c},{reloadDeps:[h],enable:!f});return{list:(0,U.useCreation)(()=>{let d=S?.list??[];return[...t?m.filter(e=>e.symbol?.toLowerCase().includes(t.toLowerCase())):i,...d].filter(({coinId:e,baseCoinId:v})=>!he(e,v))},[i,m,S?.list]),listRef:I,search:t,onSearch:N,loading:A,loadingMore:b,isSearching:A&&!!t}}pe();r();s();var tt={empty:"_empty_1umri_1"};function St(){let t=(0,it.useHistory)(),{keyringIdentityType:l}=(0,ot.useSelector)(be),{currentNetworkUniqueId:o}=oe(),i=M(),m=ie(),{list:c,listRef:f,onSearch:N,loading:h,loadingMore:C,isSearching:S}=et(),[A,b]=(0,B.useState)(!1),[I,L]=(0,B.useState)(!1),[d,k]=(0,B.useState)(null),$=_=>{if(_?.childrenCoin?.length===1){let{addressType:T}=_.childrenCoin[0]||{},p=G({coinId:_.coinId,addressType:T});t.push(`${W}${p}`)}},e=async _=>{let T=Ne(_),p;if(T){if(p=await Ae(_),o!==""&&p?.aggregation&&(p=p.childrenCoin?.find(lt=>lt.chainId===Number(o))??null),!p)return}else p=_;if(j(p)){k(p),b(!0);return}if(q(p)){$(p),k(p),L(!0);return}await m(p);let ce,de,nt=p.aggregation,mt=p.childrenCoin??[];nt&&mt.length>0?(ce=z,de=`coinKey=${encodeURIComponent(p.key)}&aggregationSymbol=${p.symbol}&type=${i}`):(ce=W,de=`coinId=${p.coinId}`),t.push({pathname:ce,search:de})},v=(0,B.useCallback)(_=>{let T={};return _.localType===Z&&_.coinId===ye&&ke(l)&&(T.tag=a("extension_wallet_footer_alert_asset_notsupported")),T},[l]);return B.default.createElement(B.default.Fragment,null,B.default.createElement(me,{list:S?[]:c,onClick:e,getItemProps:v,isVirtualList:!1,onSearch:N,ref:f,renderEmpty:()=>B.default.createElement(H.State,{className:tt.empty,title:a("commonall_emptystate_text_no_results")}),loadingMore:C||h&&!S,loading:S}),B.default.createElement(ne,{visible:A,onClose:()=>{b(!1)},coin:d,type:"receive"}),B.default.createElement(le,{visible:I,onClose:()=>{L(!1)},coin:d,type:"receive"}))}var rt=St;var vt={[fe.SEND]:Qe,[fe.RECEIVE]:rt};function Nt(){let t=M(),l=vt[t];return l?st.default.createElement(l,null):null}var Hi=Nt;export{Hi as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=select-coin-PIUNDOVF.js.map
